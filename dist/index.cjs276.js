"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const n=require("./index.cjs156.js"),o=require("./index.cjs171.js"),rv=require("./index.cjs203.js"),av=require("./index.cjs248.js"),vv=require("./index.cjs172.js"),Rr=require("./index.cjs173.js"),yv=require("react"),i=require("./index.cjs279.js");function dv(r){const w=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(r){for(const y in r)if(y!=="default"){const q=Object.getOwnPropertyDescriptor(r,y);Object.defineProperty(w,y,q.get?q:{enumerable:!0,get:()=>r[y]})}}return w.default=r,Object.freeze(w)}const ar=dv(yv);function tr(r){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y="".concat(w),q=y.match(/^(.*)\%$/);return q?r*(parseFloat(q[1])/100):parseFloat(y)}function er(r,w){var y=w||[],q=o.default(y,2),u=q[0],U=q[1];return[tr(r.width,u),tr(r.height,U)]}function pr(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[r[0],r[1]]}function N(r,w){var y=w[0],q=w[1],u,U;return y==="t"?U=r.y:y==="b"?U=r.y+r.height:U=r.y+r.height/2,q==="l"?u=r.x:q==="r"?u=r.x+r.width:u=r.x+r.width/2,{x:u,y:U}}function J(r,w){var y={t:"b",b:"t",l:"r",r:"l"};return r.map(function(q,u){return u===w?y[q]||"c":q}).join("")}function lv(r,w,y,q,u,U,vr){var ra=ar.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:u[q]||{}}),jr=o.default(ra,2),j=jr[0],Cr=jr[1],yr=ar.useRef(0),Fr=ar.useMemo(function(){return w?i.collectScroller(w):[]},[w]),b=ar.useRef({}),aa=function(){b.current={}};r||aa();var va=vv.default(function(){if(w&&y&&r){let F=function(nr,E){var rr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qr,or=d.x+nr,Or=d.y+E,oa=or+L,Oa=Or+T,Ra=Math.max(or,rr.left),ta=Math.max(Or,rr.top),ea=Math.min(oa,rr.right),pa=Math.min(Oa,rr.bottom);return Math.max(0,(ea-Ra)*(pa-ta))},Er=function(){P=d.y+M,e=P+T,g=d.x+h,p=g+L};var k,K,dr,lr,a=w,zr=a.ownerDocument,da=i.getWin(a),hr=da.getComputedStyle(a),la=hr.width,ha=hr.height,Ma=hr.position,wa=a.style.left,qa=a.style.top,ba=a.style.right,ua=a.style.bottom,Da=a.style.overflow,B=n.default(n.default({},u[q]),U),Q=zr.createElement("div");(k=a.parentElement)===null||k===void 0||k.appendChild(Q),Q.style.left="".concat(a.offsetLeft,"px"),Q.style.top="".concat(a.offsetTop,"px"),Q.style.position=Ma,Q.style.height="".concat(a.offsetHeight,"px"),Q.style.width="".concat(a.offsetWidth,"px"),a.style.left="0",a.style.top="0",a.style.right="auto",a.style.bottom="auto",a.style.overflow="hidden";var l;if(Array.isArray(y))l={x:y[0],y:y[1],width:0,height:0};else{var Mr,wr,C=y.getBoundingClientRect();C.x=(Mr=C.x)!==null&&Mr!==void 0?Mr:C.left,C.y=(wr=C.y)!==null&&wr!==void 0?wr:C.top,l={x:C.x,y:C.y,width:C.width,height:C.height}}var d=a.getBoundingClientRect();d.x=(K=d.x)!==null&&K!==void 0?K:d.left,d.y=(dr=d.y)!==null&&dr!==void 0?dr:d.top;var S=zr.documentElement,ja=S.clientWidth,Ca=S.clientHeight,Fa=S.scrollWidth,fa=S.scrollHeight,Ur=S.scrollTop,Gr=S.scrollLeft,T=d.height,L=d.width,V=l.height,$=l.width,za={left:0,top:0,right:ja,bottom:Ca},Ua={left:-Gr,top:-Ur,right:Fa-Gr,bottom:fa-Ur},c=B.htmlRegion,Jr="visible",Kr="visibleFirst";c!=="scroll"&&c!==Kr&&(c=Jr);var I=c===Kr,Ga=i.getVisibleArea(Ua,Fr),v=i.getVisibleArea(za,Fr),Qr=c===Jr?v:Ga,O=I?v:Qr;a.style.left="auto",a.style.top="auto",a.style.right="0",a.style.bottom="0";var Zr=a.getBoundingClientRect();a.style.left=wa,a.style.top=qa,a.style.right=ba,a.style.bottom=ua,a.style.overflow=Da,(lr=a.parentElement)===null||lr===void 0||lr.removeChild(Q);var W=i.toNum(Math.round(L/parseFloat(la)*1e3)/1e3),H=i.toNum(Math.round(T/parseFloat(ha)*1e3)/1e3);if(W===0||H===0||rv.isDOM(y)&&!av.default(y))return;var Ja=B.offset,Ka=B.targetOffset,Qa=er(d,Ja),kr=o.default(Qa,2),f=kr[0],z=kr[1],Za=er(l,Ka),Br=o.default(Za,2),ka=Br[0],Ba=Br[1];l.x-=ka,l.y-=Ba;var Sa=B.points||[],Sr=o.default(Sa,2),Ta=Sr[0],La=Sr[1],Z=pr(La),D=pr(Ta),Tr=N(l,Z),Lr=N(d,D),s=n.default({},B),h=Tr.x-Lr.x+f,M=Tr.y-Lr.y+z,G=F(h,M),R=F(h,M,v),Wr=N(l,["t","l"]),Hr=N(d,["t","l"]),sr=N(l,["b","r"]),ir=N(d,["b","r"]),t=B.overflow||{},Wa=t.adjustX,Ha=t.adjustY,Nr=t.shiftX,Vr=t.shiftY,$r=function(E){return typeof E=="boolean"?E:E>=0},P,e,g,p;Er();var cr=$r(Ha),Ir=D[0]===Z[0];if(cr&&D[0]==="t"&&(e>O.bottom||b.current.bt)){var _=M;Ir?_-=T-V:_=Wr.y-ir.y-z;var Pr=F(h,_),sa=F(h,_,v);Pr>G||Pr===G&&(!I||sa>=R)?(b.current.bt=!0,M=_,z=-z,s.points=[J(D,0),J(Z,0)]):b.current.bt=!1}if(cr&&D[0]==="b"&&(P<O.top||b.current.tb)){var x=M;Ir?x+=T-V:x=sr.y-Hr.y-z;var gr=F(h,x),ia=F(h,x,v);gr>G||gr===G&&(!I||ia>=R)?(b.current.tb=!0,M=x,z=-z,s.points=[J(D,0),J(Z,0)]):b.current.tb=!1}var _r=$r(Wa),xr=D[1]===Z[1];if(_r&&D[1]==="l"&&(p>O.right||b.current.rl)){var X=h;xr?X-=L-$:X=Wr.x-ir.x-f;var Xr=F(X,M),Na=F(X,M,v);Xr>G||Xr===G&&(!I||Na>=R)?(b.current.rl=!0,h=X,f=-f,s.points=[J(D,1),J(Z,1)]):b.current.rl=!1}if(_r&&D[1]==="r"&&(g<O.left||b.current.lr)){var Y=h;xr?Y+=L-$:Y=sr.x-Hr.x-f;var Yr=F(Y,M),Va=F(Y,M,v);Yr>G||Yr===G&&(!I||Va>=R)?(b.current.lr=!0,h=Y,f=-f,s.points=[J(D,1),J(Z,1)]):b.current.lr=!1}Er();var A=Nr===!0?0:Nr;typeof A=="number"&&(g<v.left&&(h-=g-v.left-f,l.x+$<v.left+A&&(h+=l.x-v.left+$-A)),p>v.right&&(h-=p-v.right-f,l.x>v.right-A&&(h+=l.x-v.right+A)));var m=Vr===!0?0:Vr;typeof m=="number"&&(P<v.top&&(M-=P-v.top-z,l.y+V<v.top+m&&(M+=l.y-v.top+V-m)),e>v.bottom&&(M-=e-v.bottom-z,l.y>v.bottom-m&&(M+=l.y-v.bottom+m)));var qr=d.x+h,$a=qr+L,br=d.y+M,ca=br+T,Ar=l.x,Ia=Ar+$,mr=l.y,Pa=mr+V,ga=Math.max(qr,Ar),_a=Math.min($a,Ia),xa=(ga+_a)/2,Xa=xa-qr,Ya=Math.max(br,mr),Aa=Math.min(ca,Pa),ma=(Ya+Aa)/2,Ea=ma-br;vr?.(w,s);var ur=Zr.right-d.x-(h+d.width),Dr=Zr.bottom-d.y-(M+d.height);W===1&&(h=Math.round(h),ur=Math.round(ur)),H===1&&(M=Math.round(M),Dr=Math.round(Dr));var na={ready:!0,offsetX:h/W,offsetY:M/H,offsetR:ur/W,offsetB:Dr/H,arrowX:Xa/W,arrowY:Ea/H,scaleX:W,scaleY:H,align:s};Cr(na)}}),ya=function(){yr.current+=1;var K=yr.current;Promise.resolve().then(function(){yr.current===K&&va()})},fr=function(){Cr(function(K){return n.default(n.default({},K),{},{ready:!1})})};return Rr.default(fr,[q]),Rr.default(function(){r||fr()},[r]),[j.ready,j.offsetX,j.offsetY,j.offsetR,j.offsetB,j.arrowX,j.arrowY,j.scaleX,j.scaleY,j.align,ya]}exports.default=lv;
