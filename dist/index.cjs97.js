"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const m=require("./index.cjs171.js"),g=require("./index.cjs192.js"),p=require("./index.cjs193.js"),o=require("./index.cjs202.js");function y(s,i){if(s.length!==i.length)return!1;for(var e=0;e<s.length;e++)if(s[e]!==i[e])return!1;return!0}var d=function(){function s(){g.default(this,s),o.default(this,"cache",void 0),o.default(this,"keys",void 0),o.default(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return p.default(s,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(e){var t,l,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n={map:this.cache};return e.forEach(function(c){if(!n)n=void 0;else{var a;n=(a=n)===null||a===void 0||(a=a.map)===null||a===void 0?void 0:a.get(c)}}),(t=n)!==null&&t!==void 0&&t.value&&u&&(n.value[1]=this.cacheCallTimes++),(l=n)===null||l===void 0?void 0:l.value}},{key:"get",value:function(e){var t;return(t=this.internalGet(e,!0))===null||t===void 0?void 0:t[0]}},{key:"has",value:function(e){return!!this.internalGet(e)}},{key:"set",value:function(e,t){var l=this;if(!this.has(e)){if(this.size()+1>s.MAX_CACHE_SIZE+s.MAX_CACHE_OFFSET){var u=this.keys.reduce(function(r,h){var f=m.default(r,2),v=f[1];return l.internalGet(h)[1]<v?[h,l.internalGet(h)[1]]:r},[this.keys[0],this.cacheCallTimes]),n=m.default(u,1),c=n[0];this.delete(c)}this.keys.push(e)}var a=this.cache;e.forEach(function(r,h){if(h===e.length-1)a.set(r,{value:[t,l.cacheCallTimes++]});else{var f=a.get(r);f?f.map||(f.map=new Map):a.set(r,{map:new Map}),a=a.get(r).map}})}},{key:"deleteByPath",value:function(e,t){var l=e.get(t[0]);if(t.length===1){var u;return l.map?e.set(t[0],{map:l.map}):e.delete(t[0]),(u=l.value)===null||u===void 0?void 0:u[0]}var n=this.deleteByPath(l.map,t.slice(1));return(!l.map||l.map.size===0)&&!l.value&&e.delete(t[0]),n}},{key:"delete",value:function(e){if(this.has(e))return this.keys=this.keys.filter(function(t){return!y(t,e)}),this.deleteByPath(this.cache,e)}}]),s}();o.default(d,"MAX_CACHE_SIZE",20);o.default(d,"MAX_CACHE_OFFSET",5);exports.default=d;exports.sameDerivativeOption=y;
