"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const s=require("react/jsx-runtime"),c=require("react"),p=({value:u,onChange:i})=>{const[r,a]=c.useState(()=>{const t=u?new Date(u):new Date;return{day:t.getDate(),month:t.getMonth()+1,year:t.getFullYear()}}),d=c.useRef(null),l=c.useRef(null),w=c.useRef(null);c.useEffect(()=>{const t=u?new Date(u):new Date;a({day:t.getDate(),month:t.getMonth()+1,year:t.getFullYear()})},[u]);const D=(t,n)=>{if(t==="day"&&(n<1||n>31)||t==="month"&&(n<1||n>12)||t==="year"&&(n<1e3||n>9999))return!1;const e={...r,[t]:n},o=new Date(e.year,e.month-1,e.day);return o.getFullYear()===e.year&&o.getMonth()+1===e.month&&o.getDate()===e.day},h=t=>n=>{const e=n.target.value?Number(n.target.value):"",o=typeof e=="number"&&D(t,e),y={...r,[t]:e};a(y),o&&i(new Date(y.year,y.month-1,y.day))},m=c.useRef(r),g=t=>n=>{if(!n.target.value){a(m.current);return}const e=Number(n.target.value);D(t,e)?m.current={...r,[t]:e}:a(m.current)},f=t=>n=>{if(!(n.metaKey||n.ctrlKey)){if(!/^[0-9]$/.test(n.key)&&!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Delete","Tab","Backspace","Enter"].includes(n.key)){n.preventDefault();return}if(n.key==="ArrowUp"){n.preventDefault();let e={...r};t==="day"&&(r[t]===new Date(r.year,r.month,0).getDate()?(e={...e,day:1,month:r.month%12+1},e.month===1&&(e.year+=1)):e.day+=1),t==="month"&&(r[t]===12?e={...e,month:1,year:r.year+1}:e.month+=1),t==="year"&&(e.year+=1),a(e),i(new Date(e.year,e.month-1,e.day))}else if(n.key==="ArrowDown"){n.preventDefault();let e={...r};t==="day"&&(r[t]===1?(e.month-=1,e.month===0&&(e.month=12,e.year-=1),e.day=new Date(e.year,e.month,0).getDate()):e.day-=1),t==="month"&&(r[t]===1?e={...e,month:12,year:r.year-1}:e.month-=1),t==="year"&&(e.year-=1),a(e),i(new Date(e.year,e.month-1,e.day))}n.key==="ArrowRight"?(n.currentTarget.selectionStart===n.currentTarget.value.length||n.currentTarget.selectionStart===0&&n.currentTarget.selectionEnd===n.currentTarget.value.length)&&(n.preventDefault(),t==="month"&&l.current?.focus(),t==="day"&&w.current?.focus()):n.key==="ArrowLeft"&&(n.currentTarget.selectionStart===0||n.currentTarget.selectionStart===0&&n.currentTarget.selectionEnd===n.currentTarget.value.length)&&(n.preventDefault(),t==="day"&&d.current?.focus(),t==="year"&&l.current?.focus())}};return s.jsxs("div",{className:"flex border rounded-lg items-center text-sm px-1",children:[s.jsx("input",{type:"text",ref:d,max:12,maxLength:2,value:r.month.toString(),onChange:h("month"),onKeyDown:f("month"),onFocus:t=>{window.innerWidth>1024&&t.target.select()},onBlur:g("month"),className:"p-0 outline-none w-6 border-none text-center",placeholder:"M"}),s.jsx("span",{className:"opacity-20 -mx-px",children:"/"}),s.jsx("input",{type:"text",ref:l,max:31,maxLength:2,value:r.day.toString(),onChange:h("day"),onKeyDown:f("day"),onFocus:t=>{window.innerWidth>1024&&t.target.select()},onBlur:g("day"),className:"p-0 outline-none w-7 border-none text-center",placeholder:"D"}),s.jsx("span",{className:"opacity-20 -mx-px",children:"/"}),s.jsx("input",{type:"text",ref:w,max:9999,maxLength:4,value:r.year.toString(),onChange:h("year"),onKeyDown:f("year"),onFocus:t=>{window.innerWidth>1024&&t.target.select()},onBlur:g("year"),className:"p-0 outline-none w-12 border-none text-center",placeholder:"YYYY"})]})};p.displayName="DateInput";exports.DateInput=p;
