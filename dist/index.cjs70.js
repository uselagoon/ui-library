"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const n=require("react/jsx-runtime"),o=require("react"),f=require("./index.cjs13.js"),r=require("@tanstack/react-table"),i=require("./index.cjs46.js"),_=require("./index.cjs63.js"),A=require("./index.cjs103.js"),N=require("./index.cjs71.js"),O=require("./index.cjs42.js"),$=require("./index.cjs62.js");function J({columns:g,data:x,searchableColumns:d,searchPlaceholder:M,onSearch:C,loading:c,renderFilters:P,disableExtra:m,initialSearch:S,initialPageSize:b,onRowClick:y}){const[p,v]=o.useState([]),[T,k]=o.useState([]),[I,q]=o.useState({}),[h,V]=o.useState(S??""),w=o.useRef(null);o.useEffect(()=>{S&&w.current&&w.current.focus()},[]);const D=(e,t,s)=>d?.length===0?String(e.getValue(t)).toLowerCase().includes(s.toLowerCase()):d?.some(a=>{const u=e.getValue(a);return String(u).toLowerCase().includes(s.toLowerCase())}),F=e=>{const t=e.getValue(),s=r.flexRender(e.column.columnDef.cell,e.getContext());return t&&h&&(!d?.length||d?.includes(e.column.id))&&typeof e.column.columnDef.cell=="function"?A.highlightTextInElement(e?.column?.columnDef?.cell(e.getContext()),h,t):s},j=o.useMemo(()=>c?Array(10).fill({}):x,[c,x]),H=o.useMemo(()=>c?g.map(e=>({...e,cell:()=>n.jsx(O.Skeleton,{className:"h-6 w-50 rounded-sm"})})):g,[c,g]),l=r.useReactTable({data:j,columns:H,getCoreRowModel:r.getCoreRowModel(),getPaginationRowModel:r.getPaginationRowModel(),getFilteredRowModel:r.getFilteredRowModel(),getSortedRowModel:r.getSortedRowModel(),onColumnFiltersChange:k,onSortingChange:v,onColumnVisibilityChange:q,autoResetPageIndex:!1,...d?{globalFilterFn:D}:{},state:{sorting:p,columnFilters:T,columnVisibility:I,globalFilter:h}}),R=p.length>0?p[0].id:null;o.useEffect(()=>{m&&l.setPageSize(x.length)},[m]),o.useEffect(()=>{b&&l.setPageSize(b)},[b]);const z=o.useMemo(()=>Math.min(1e3,Math.max(40,Math.floor(j.length*.0725))),[j.length]),B=l.getPageCount(),L=l.getState().pagination.pageIndex+1,W=Array.from({length:B||1},(e,t)=>t+1).map(e=>({label:`Page ${String(e)}`,value:e})),E=e=>{l.setPageIndex(Number(e)-1)},G=(e,t)=>{if(typeof y!="function")return;const s=e.target,a=s.closest('[data-slot="table-cell"]');e.currentTarget.contains(s)&&(a?.firstElementChild?.contains(s)||y(t))};return n.jsxs("div",{className:"w-[100%] mx-auto",children:[m?null:n.jsxs("div",{className:"flex items-end justify-between py-4",children:[n.jsx(_.DebouncedInput,{ref:w,debounce:z,label:"",placeholder:M??"Start typing to search",value:h??"",onChange:e=>{C&&C(e),!c&&V(e)},className:"max-w-sm"}),P&&P(l)]}),n.jsx("div",{className:"rounded-md border",children:n.jsxs(i.Table,{className:"table-fixed",children:[n.jsx(i.TableHeader,{children:l.getHeaderGroups().map(e=>n.jsx(i.TableRow,{className:"py-6",children:e.headers.map(t=>{const s=t.column.id===R,a=t.column.getSize(),u=t.column.columnDef?.width||a;return n.jsx(i.TableHead,{className:N.cn("transition-colors py-1",s&&"bg-gray-100 dark:bg-gray-700"),style:{width:u},children:n.jsx("div",{className:"line-clamp-2 break-all leading-snug",children:t.isPlaceholder?null:r.flexRender(t.column.columnDef.header,t.getContext())})},t.id)})},e.id))}),n.jsx(i.TableBody,{children:l.getRowModel().rows?.length?l.getRowModel().rows.map(e=>n.jsx(i.TableRow,{onClick:t=>G(t,e),className:"py-6","data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(t=>{const s=t.column.id===R,a=t.column.getSize(),u=t.column.columnDef?.width||a;return n.jsx(i.TableCell,{style:{width:u},className:N.cn("transition-colors py-6 text-ellipsis",s&&"bg-gray-100 dark:bg-gray-700"),children:n.jsx("div",{className:"line-clamp-3 break-words leading-snug",children:F(t)})},t.id)})},e.id)):n.jsx(i.TableRow,{children:n.jsx(i.TableCell,{colSpan:g.length,className:"h-48 text-center",children:"No entries"})})})]})}),m?null:n.jsxs("div",{className:"flex items-center justify-end space-x-2 py-6",children:[n.jsxs("div",{className:"text-muted-foreground flex-1 text-sm",children:["Showing ",l.getRowModel().rows.length," of ",l.getPrePaginationRowModel().rows.length," entries"]}),n.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",l.getState().pagination.pageIndex+1," of ",l.getPageCount()||1]}),n.jsx(f.Button,{variant:"outline",size:"sm",onClick:()=>l.firstPage(),disabled:!l.getCanPreviousPage(),children:"<<"}),n.jsx(f.Button,{variant:"outline",size:"sm",onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),children:"Previous"}),n.jsx(f.Button,{variant:"outline",size:"sm",onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),children:"Next"}),n.jsx(f.Button,{variant:"outline",size:"sm",onClick:()=>l.lastPage(),disabled:!l.getCanNextPage(),children:">>"}),n.jsx($.default,{value:String(L)||void 0,placeholder:"Go to page",options:W,onValueChange:E,disabled:c})]})]})}exports.default=J;
