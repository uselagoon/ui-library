"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("react/jsx-runtime"),o=require("react"),p=require("./index.cjs13.js"),a=require("@tanstack/react-table"),i=require("./index.cjs46.js"),A=require("./index.cjs63.js"),O=require("./index.cjs104.js"),M=require("./index.cjs71.js"),$=require("./index.cjs42.js"),J=require("./index.cjs62.js");function K({columns:m,data:h,searchableColumns:d,searchPlaceholder:v,onSearch:S,loading:c,renderFilters:y,disableExtra:f,disablePagination:g,initialSearch:R,initialPageSize:b,onRowClick:P}){const[w,T]=o.useState([]),[k,I]=o.useState([]),[q,F]=o.useState({}),[x,V]=o.useState(R??""),j=o.useRef(null);o.useEffect(()=>{R&&j.current&&j.current.focus()},[]);const D=(e,n,s)=>d?.length===0?String(e.getValue(n)).toLowerCase().includes(s.toLowerCase()):d?.some(r=>{const u=e.getValue(r);return String(u).toLowerCase().includes(s.toLowerCase())}),H=e=>{const n=e.getValue(),s=a.flexRender(e.column.columnDef.cell,e.getContext());return n&&x&&(!d?.length||d?.includes(e.column.id))&&typeof e.column.columnDef.cell=="function"?O.highlightTextInElement(e?.column?.columnDef?.cell(e.getContext()),x,n):s},C=o.useMemo(()=>c?Array(10).fill({}):h,[c,h]),z=o.useMemo(()=>c?m.map(e=>({...e,cell:()=>t.jsx($.Skeleton,{className:"h-6 w-50 rounded-sm"})})):m,[c,m]),l=a.useReactTable({data:C,columns:z,getCoreRowModel:a.getCoreRowModel(),getPaginationRowModel:a.getPaginationRowModel(),getFilteredRowModel:a.getFilteredRowModel(),getSortedRowModel:a.getSortedRowModel(),onColumnFiltersChange:I,onSortingChange:T,onColumnVisibilityChange:F,autoResetPageIndex:!1,...d?{globalFilterFn:D}:{},state:{sorting:w,columnFilters:k,columnVisibility:q,globalFilter:x}}),N=w.length>0?w[0].id:null;o.useEffect(()=>{(f||g)&&l.setPageSize(h.length)},[f,g,h.length]),o.useEffect(()=>{b&&!g&&l.setPageSize(b)},[b,g]);const B=o.useMemo(()=>Math.min(1e3,Math.max(40,Math.floor(C.length*.0725))),[C.length]),L=l.getPageCount(),W=l.getState().pagination.pageIndex+1,E=Array.from({length:L||1},(e,n)=>n+1).map(e=>({label:`Page ${String(e)}`,value:e})),G=e=>{l.setPageIndex(Number(e)-1)},_=(e,n)=>{if(typeof P!="function")return;const s=e.target,r=s.closest('[data-slot="table-cell"]');e.currentTarget.contains(s)&&(r?.firstElementChild?.contains(s)||P(n))};return t.jsxs("div",{className:"w-[100%] mx-auto",children:[f?null:t.jsxs("div",{className:"flex items-end justify-between py-4",children:[t.jsx(A.DebouncedInput,{ref:j,debounce:B,label:"",placeholder:v??"Start typing to search",value:x??"",onChange:e=>{S&&S(e),!c&&V(e)},className:"max-w-sm"}),y&&y(l)]}),t.jsx("div",{className:"rounded-md border",children:t.jsxs(i.Table,{className:"table-fixed",children:[t.jsx(i.TableHeader,{children:l.getHeaderGroups().map(e=>t.jsx(i.TableRow,{className:"py-6",children:e.headers.map(n=>{const s=n.column.id===N,r=n.column.getSize(),u=n.column.columnDef?.width||r;return t.jsx(i.TableHead,{className:M.cn("transition-colors py-1",s&&"bg-gray-100 dark:bg-gray-700"),style:{width:u},children:t.jsx("div",{className:"line-clamp-2 break-all leading-snug",children:n.isPlaceholder?null:a.flexRender(n.column.columnDef.header,n.getContext())})},n.id)})},e.id))}),t.jsx(i.TableBody,{children:l.getRowModel().rows?.length?l.getRowModel().rows.map(e=>t.jsx(i.TableRow,{onClick:n=>_(n,e),className:"py-6","data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(n=>{const s=n.column.id===N,r=n.column.getSize(),u=n.column.columnDef?.width||r;return t.jsx(i.TableCell,{style:{width:u},className:M.cn("transition-colors py-6 text-ellipsis",s&&"bg-gray-100 dark:bg-gray-700"),children:t.jsx("div",{className:"line-clamp-3 break-words leading-snug",children:H(n)})},n.id)})},e.id)):t.jsx(i.TableRow,{children:t.jsx(i.TableCell,{colSpan:m.length,className:"h-48 text-center",children:"No entries"})})})]})}),f?null:t.jsxs("div",{className:"flex items-center justify-end space-x-2 py-6",children:[t.jsxs("div",{className:"text-muted-foreground flex-1 text-sm",children:["Showing ",l.getRowModel().rows.length," of ",l.getPrePaginationRowModel().rows.length," entries"]}),!g&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",l.getState().pagination.pageIndex+1," of ",l.getPageCount()||1]}),t.jsx(p.Button,{variant:"outline",size:"sm",onClick:()=>l.firstPage(),disabled:!l.getCanPreviousPage(),children:"<<"}),t.jsx(p.Button,{variant:"outline",size:"sm",onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),children:"Previous"}),t.jsx(p.Button,{variant:"outline",size:"sm",onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),children:"Next"}),t.jsx(p.Button,{variant:"outline",size:"sm",onClick:()=>l.lastPage(),disabled:!l.getCanNextPage(),children:">>"}),t.jsx(J.default,{value:String(W)||void 0,placeholder:"Go to page",options:E,onValueChange:G,disabled:c})]})]})]})}exports.default=K;
