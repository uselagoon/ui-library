{"version":3,"file":"index.es4.js","sources":["../src/hooks/useTheme.tsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from 'react';\n\ntype Theme = 'dark' | 'light';\n//@ts-ignore\nconst ThemeContext = createContext<any>(null);\n\nconst useTheme = () => {\n\tconst context = useContext(ThemeContext);\n\tif (!context) {\n\t\tthrow new Error('useTheme must be used within a ThemeProvider');\n\t}\n\treturn context;\n};\n\nexport const AppThemeProvider = ({ defaultScheme, children }: { defaultScheme?: Theme; children: React.ReactNode }) => {\n\tconst [theme, setTheme] = useState<Theme | null>(null);\n\n\tuseEffect(() => {\n\t\tif (defaultScheme) {\n\t\t\tsetTheme(defaultScheme);\n\t\t\treturn;\n\t\t}\n\t\tconst storageTheme = localStorage.getItem('theme');\n\t\t// already previously set in browser store.\n\t\tif (storageTheme && ['light', 'dark'].includes(storageTheme)) {\n\t\t\tsetTheme(storageTheme as Theme);\n\t\t} else {\n\t\t\t// try to automatically infer dark mode theme.\n\t\t\tif (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {\n\t\t\t\tsetTheme('dark');\n\t\t\t\tlocalStorage.setItem('theme', 'dark');\n\t\t\t} else {\n\t\t\t\t// default to light\n\t\t\t\tsetTheme('light');\n\t\t\t\tlocalStorage.setItem('theme', 'light');\n\t\t\t}\n\t\t}\n\t}, []);\n\n\tconst toggleTheme = () => {\n\t\tconst newTheme = theme === 'light' ? 'dark' : 'light';\n\t\tsetTheme(newTheme);\n\t\tlocalStorage.setItem('theme', newTheme);\n\t\twindow.dispatchEvent(new Event('storage'));\n\t};\n\n\treturn <ThemeContext.Provider value={{ theme, toggleTheme }}>{children}</ThemeContext.Provider>;\n};\n\nexport default useTheme;\n"],"names":["ThemeContext","createContext","useTheme","context","useContext","AppThemeProvider","defaultScheme","children","theme","setTheme","useState","useEffect","storageTheme","toggleTheme","newTheme","React"],"mappings":";AAIA,MAAMA,IAAeC,EAAmB,IAAI,GAEtCC,IAAW,MAAM;AAChB,QAAAC,IAAUC,EAAWJ,CAAY;AACvC,MAAI,CAACG;AACE,UAAA,IAAI,MAAM,8CAA8C;AAExD,SAAAA;AACR,GAEaE,IAAmB,CAAC,EAAE,eAAAC,GAAe,UAAAC,QAAqE;AACtH,QAAM,CAACC,GAAOC,CAAQ,IAAIC,EAAuB,IAAI;AAErD,EAAAC,EAAU,MAAM;AACf,QAAIL,GAAe;AAClB,MAAAG,EAASH,CAAa;AACtB;AAAA,IAAA;AAEK,UAAAM,IAAe,aAAa,QAAQ,OAAO;AAEjD,IAAIA,KAAgB,CAAC,SAAS,MAAM,EAAE,SAASA,CAAY,IAC1DH,EAASG,CAAqB,IAG1B,OAAO,cAAc,OAAO,WAAW,8BAA8B,EAAE,WAC1EH,EAAS,MAAM,GACF,aAAA,QAAQ,SAAS,MAAM,MAGpCA,EAAS,OAAO,GACH,aAAA,QAAQ,SAAS,OAAO;AAAA,EAGxC,GAAG,EAAE;AAEL,QAAMI,IAAc,MAAM;AACnB,UAAAC,IAAWN,MAAU,UAAU,SAAS;AAC9C,IAAAC,EAASK,CAAQ,GACJ,aAAA,QAAQ,SAASA,CAAQ,GACtC,OAAO,cAAc,IAAI,MAAM,SAAS,CAAC;AAAA,EAC1C;AAEO,SAAAC,gBAAAA,EAAA,cAACf,EAAa,UAAb,EAAsB,OAAO,EAAE,OAAAQ,GAAO,aAAAK,IAAY,GAAIN,CAAS;AACxE;"}