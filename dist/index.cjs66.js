"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("react/jsx-runtime"),u=require("react"),V=require("./index.cjs29.js"),l=require("./index.cjs40.js"),b=require("./index.cjs13.js"),D=require("./index.cjs28.js"),E=require("./index.cjs54.js"),I=require("./index.cjs62.js"),R=require("lucide-react");function M({sheetTrigger:S="Open",sheetTitle:y="",sheetDescription:q="",sheetFooterButton:C="Save changes",buttonAction:f=()=>{},sheetFields:n,loading:c=!1,additionalContent:N=null,error:h=!1,onFieldChange:j,...k}){const[o,x]=u.useState(!1),g=u.useRef(c),p=u.useMemo(()=>()=>{const e={};return n.forEach(s=>{s.inputDefault!==void 0&&(e[s.id]=s.inputDefault)}),e},[n]),[r,m]=u.useState(p),v=u.useMemo(()=>n.some(s=>{if(s.required)switch(s.type??"text"){case"checkbox":return r[s.id]!==!0;case"select":case"textarea":case"text":case"email":case"number":case"password":case"tel":return!r[s.id];default:return!1}return!1})||c,[n,r,c]),d=(e,s)=>{const i={...r,[e]:s};m(i),n.find(O=>O.id===e)?.triggerFieldUpdate&&j&&j(e,s,i)},w=async e=>{v||(f&&await f(e,r),!c&&!h&&setTimeout(()=>x(!1)))};return u.useEffect(()=>{o&&m(p())},[o,p]),u.useEffect(()=>{g.current===!0&&c===!1&&o&&!h&&x(!1),g.current=c},[c,o,h]),u.useEffect(()=>{const e=n.map(a=>a.id),s=Object.keys(r),i={...r};s.forEach(a=>{e.includes(a)||delete i[a]}),n.forEach(a=>{a.inputDefault!==void 0&&!(a.id in i)&&(i[a.id]=a.inputDefault)}),m(i)},[n]),t.jsxs(l.Sheet,{open:o,onOpenChange:x,...k,children:[t.jsx(l.SheetTrigger,{asChild:!0,children:t.jsx(b.Button,{children:S})}),t.jsxs(l.SheetContent,{className:"flex flex-col h-full",children:[t.jsxs(l.SheetHeader,{children:[t.jsx(l.SheetTitle,{children:y}),t.jsx(l.SheetDescription,{children:q})]}),t.jsxs("div",{className:"flex flex-col gap-4 overflow-y-auto px-4",children:[n.map(e=>t.jsx("div",{className:"grid auto-rows-min gap-6 px-4",children:t.jsxs("div",{className:"grid gap-3",children:[e.type!=="checkbox"&&t.jsxs(V.Label,{htmlFor:e.id,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),(()=>{switch(e.type){case"checkbox":return t.jsx("div",{className:"flex items-center space-x-2",children:t.jsx(E.default,{label:e.label,id:e.id,checked:r[e.id]===!0||r[e.id]==="true",onCheckedChange:s=>d(e.id,s)})});case"textarea":return t.jsx("textarea",{id:e.id,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:r[e.id]||"",onChange:s=>d(e.id,s.target.value),placeholder:e?.placeholder,readOnly:e.readOnly});case"select":return t.jsx(I.default,{placeholder:e?.placeholder||"",options:e?.options||[],value:r[e.id]||"",onValueChange:s=>d(e.id,s)});default:return t.jsx(D.Input,{type:e?.type||"text",id:e.id,value:r[e.id]||"",onChange:s=>d(e.id,s.target.value),placeholder:e?.placeholder,readOnly:e.readOnly})}})()]})},e.id)),t.jsx("section",{className:"px-4",children:N})]}),t.jsxs(l.SheetFooter,{children:[t.jsxs(b.Button,{onClick:w,disabled:v,children:[c&&t.jsx(R.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),C]}),t.jsx(l.SheetClose,{asChild:!0,children:t.jsx(b.Button,{variant:"outline",children:"Close"})})]})]})]})}exports.default=M;
