"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("react/jsx-runtime"),u=require("react"),V=require("./index.cjs29.js"),i=require("./index.cjs40.js"),m=require("./index.cjs13.js"),D=require("./index.cjs28.js"),E=require("./index.cjs54.js"),I=require("./index.cjs62.js"),R=require("lucide-react");function M({sheetTrigger:S="Open",sheetTitle:y="",sheetDescription:q="",sheetFooterButton:C="Save changes",buttonAction:j=()=>{},sheetFields:a,loading:c=!1,additionalContent:k=null,error:h=!1,onFieldChange:g,...O}){const[l,p]=u.useState(!1),f=u.useRef(c),x=u.useMemo(()=>()=>{const e={};return a.forEach(r=>{r.inputDefault!==void 0&&(e[r.id]=r.inputDefault)}),e},[a]),[s,b]=u.useState(x),v=u.useMemo(()=>a.some(r=>{if(r.required)switch(r.type??"text"){case"checkbox":return s[r.id]!==!0;case"select":case"textarea":case"text":case"email":case"number":case"password":case"tel":return!s[r.id];default:return!1}return!1})||c,[a,s,c]),d=(e,r)=>{const o={...s,[e]:r};b(o),a.find(N=>N.id===e)?.triggerFieldUpdate&&g&&g(e,r,o)},w=async e=>{v||(j&&await j(e,s),!c&&!h&&setTimeout(()=>p(!1)))};return u.useEffect(()=>{l&&b(x())},[l,x]),u.useEffect(()=>{f.current===!0&&c===!1&&l&&!h&&p(!1),f.current=c},[c,l,h]),u.useEffect(()=>{const e=a.map(n=>n.id),r=Object.keys(s),o={...s};r.forEach(n=>{e.includes(n)||delete o[n]}),a.forEach(n=>{n.inputDefault!==void 0&&!(n.id in o)&&(o[n.id]=n.inputDefault)}),b(o)},[a]),t.jsxs(i.Sheet,{open:l,onOpenChange:p,...O,children:[t.jsx(i.SheetTrigger,{asChild:!0,children:t.jsx(m.Button,{variant:"outline",children:S})}),t.jsxs(i.SheetContent,{children:[t.jsxs(i.SheetHeader,{children:[t.jsx(i.SheetTitle,{children:y}),t.jsx(i.SheetDescription,{children:q})]}),a.map(e=>t.jsx("div",{className:"grid auto-rows-min gap-6 px-4",children:t.jsxs("div",{className:"grid gap-3",children:[e.type!=="checkbox"&&t.jsxs(V.Label,{htmlFor:e.id,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),(()=>{switch(e.type){case"checkbox":return t.jsx("div",{className:"flex items-center space-x-2",children:t.jsx(E.default,{label:e.label,id:e.id,checked:s[e.id]===!0||s[e.id]==="true",onCheckedChange:r=>d(e.id,r)})});case"textarea":return t.jsx("textarea",{id:e.id,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:s[e.id]||"",onChange:r=>d(e.id,r.target.value),placeholder:e?.placeholder,readOnly:e.readOnly});case"select":return t.jsx(I.default,{placeholder:e?.placeholder||"",options:e?.options||[],value:s[e.id]||"",onValueChange:r=>d(e.id,r)});default:return t.jsx(D.Input,{type:e?.type||"text",id:e.id,value:s[e.id]||"",onChange:r=>d(e.id,r.target.value),placeholder:e?.placeholder,readOnly:e.readOnly})}})()]})},e.id)),t.jsx("section",{className:"px-4",children:k}),t.jsxs(i.SheetFooter,{children:[t.jsxs(m.Button,{onClick:w,disabled:v,children:[c&&t.jsx(R.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),C]}),t.jsx(i.SheetClose,{asChild:!0,children:t.jsx(m.Button,{variant:"outline",children:"Close"})})]})]})]})}exports.default=M;
