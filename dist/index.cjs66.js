"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("react/jsx-runtime"),c=require("react"),N=require("./index.cjs29.js"),n=require("./index.cjs40.js"),x=require("./index.cjs13.js"),O=require("./index.cjs28.js"),w=require("./index.cjs54.js"),V=require("./index.cjs62.js"),R=require("lucide-react");function D({sheetTrigger:g="Open",sheetTitle:v="",sheetDescription:S="",sheetFooterButton:f="Save changes",buttonAction:p=()=>{},sheetFields:u,loading:a=!1,additionalContent:C=null,error:o=!1,...q}){const[i,d]=c.useState(!1),b=c.useRef(a),h=c.useMemo(()=>()=>{const e={};return u.forEach(s=>{s.inputDefault!==void 0&&(e[s.id]=s.inputDefault)}),e},[u]),[r,m]=c.useState(h),j=c.useMemo(()=>u.some(s=>{if(s.required)switch(s.type??"text"){case"checkbox":return r[s.id]!==!0;case"select":case"textarea":case"text":case"email":case"number":case"password":case"tel":return!r[s.id];default:return!1}return!1})||a,[u,r,a]),l=(e,s)=>{m(k=>({...k,[e]:s}))},y=async e=>{j||(p&&await p(e,r),!a&&!o&&setTimeout(()=>d(!1)))};return c.useEffect(()=>{i&&m(h())},[i,h]),c.useEffect(()=>{b.current===!0&&a===!1&&i&&!o&&d(!1),b.current=a},[a,i,o]),t.jsxs(n.Sheet,{open:i,onOpenChange:d,...q,children:[t.jsx(n.SheetTrigger,{asChild:!0,children:t.jsx(x.Button,{variant:"outline",children:g})}),t.jsxs(n.SheetContent,{children:[t.jsxs(n.SheetHeader,{children:[t.jsx(n.SheetTitle,{children:v}),t.jsx(n.SheetDescription,{children:S})]}),u.map(e=>t.jsx("div",{className:"grid auto-rows-min gap-6 px-4",children:t.jsxs("div",{className:"grid gap-3",children:[e.type!=="checkbox"&&t.jsxs(N.Label,{htmlFor:e.id,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),(()=>{switch(e.type){case"checkbox":return t.jsx("div",{className:"flex items-center space-x-2",children:t.jsx(w.default,{label:e.label,id:e.id,checked:r[e.id]===!0||r[e.id]==="true",onCheckedChange:s=>l(e.id,s)})});case"textarea":return t.jsx("textarea",{id:e.id,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:r[e.id]||"",onChange:s=>l(e.id,s.target.value),placeholder:e?.placeholder,readOnly:e.readOnly});case"select":return t.jsx(V.default,{placeholder:e?.placeholder||"",options:e?.options||[],defaultValue:r[e.id]||"",onValueChange:s=>l(e.id,s)});default:return t.jsx(O.Input,{type:e?.type||"text",id:e.id,value:r[e.id]||"",onChange:s=>l(e.id,s.target.value),placeholder:e?.placeholder,readOnly:e.readOnly})}})()]})},e.id)),t.jsx("section",{className:"px-4",children:C}),t.jsxs(n.SheetFooter,{children:[t.jsxs(x.Button,{onClick:y,disabled:j,children:[a&&t.jsx(R.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),f]}),t.jsx(n.SheetClose,{asChild:!0,children:t.jsx(x.Button,{variant:"outline",children:"Close"})})]})]})]})}exports.default=D;
