{"version":3,"file":"index.cjs18.js","sources":["../src/components/ui/chart.tsx"],"sourcesContent":["import * as React from 'react';\nimport * as RechartsPrimitive from 'recharts';\n\nimport { cn } from '@/lib/utils';\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: '', dark: '.dark' } as const;\n\nexport type ChartConfig = {\n\t[k in string]: {\n\t\tlabel?: React.ReactNode;\n\t\ticon?: React.ComponentType;\n\t} & ({ color?: string; theme?: never } | { color?: never; theme: Record<keyof typeof THEMES, string> });\n};\n\ntype ChartContextProps = {\n\tconfig: ChartConfig;\n};\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null);\n\nfunction useChart() {\n\tconst context = React.useContext(ChartContext);\n\n\tif (!context) {\n\t\tthrow new Error('useChart must be used within a <ChartContainer />');\n\t}\n\n\treturn context;\n}\n\nfunction ChartContainer({\n\tid,\n\tclassName,\n\tchildren,\n\tconfig,\n\t...props\n}: React.ComponentProps<'div'> & {\n\tconfig: ChartConfig;\n\tchildren: React.ComponentProps<typeof RechartsPrimitive.ResponsiveContainer>['children'];\n}) {\n\tconst uniqueId = React.useId();\n\tconst chartId = `chart-${id || uniqueId.replace(/:/g, '')}`;\n\n\treturn (\n\t\t<ChartContext.Provider value={{ config }}>\n\t\t\t<div\n\t\t\t\tdata-slot=\"chart\"\n\t\t\t\tdata-chart={chartId}\n\t\t\t\tclassName={cn(\n\t\t\t\t\t\"[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden\",\n\t\t\t\t\tclassName,\n\t\t\t\t)}\n\t\t\t\t{...props}\n\t\t\t>\n\t\t\t\t<ChartStyle id={chartId} config={config} />\n\t\t\t\t<RechartsPrimitive.ResponsiveContainer>{children}</RechartsPrimitive.ResponsiveContainer>\n\t\t\t</div>\n\t\t</ChartContext.Provider>\n\t);\n}\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n\tconst colorConfig = Object.entries(config).filter(([, config]) => config.theme || config.color);\n\n\tif (!colorConfig.length) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<style\n\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t__html: Object.entries(THEMES)\n\t\t\t\t\t.map(\n\t\t\t\t\t\t([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n\t.map(([key, itemConfig]) => {\n\t\tconst color = itemConfig.theme?.[theme as keyof typeof itemConfig.theme] || itemConfig.color;\n\t\treturn color ? `  --color-${key}: ${color};` : null;\n\t})\n\t.join('\\n')}\n}\n`,\n\t\t\t\t\t)\n\t\t\t\t\t.join('\\n'),\n\t\t\t}}\n\t\t/>\n\t);\n};\n\nconst ChartTooltip = RechartsPrimitive.Tooltip;\n\nfunction ChartTooltipContent({\n\tactive,\n\tpayload,\n\tclassName,\n\tindicator = 'dot',\n\thideLabel = false,\n\thideIndicator = false,\n\tlabel,\n\tlabelFormatter,\n\tlabelClassName,\n\tformatter,\n\tcolor,\n\tnameKey,\n\tlabelKey,\n}: React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n\tReact.ComponentProps<'div'> & {\n\t\thideLabel?: boolean;\n\t\thideIndicator?: boolean;\n\t\tindicator?: 'line' | 'dot' | 'dashed';\n\t\tnameKey?: string;\n\t\tlabelKey?: string;\n\t}) {\n\tconst { config } = useChart();\n\n\tconst tooltipLabel = React.useMemo(() => {\n\t\tif (hideLabel || !payload?.length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst [item] = payload;\n\t\tconst key = `${labelKey || item?.dataKey || item?.name || 'value'}`;\n\t\tconst itemConfig = getPayloadConfigFromPayload(config, item, key);\n\t\tconst value =\n\t\t\t!labelKey && typeof label === 'string' ? config[label as keyof typeof config]?.label || label : itemConfig?.label;\n\n\t\tif (labelFormatter) {\n\t\t\treturn <div className={cn('font-medium', labelClassName)}>{labelFormatter(value, payload)}</div>;\n\t\t}\n\n\t\tif (!value) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn <div className={cn('font-medium', labelClassName)}>{value}</div>;\n\t}, [label, labelFormatter, payload, hideLabel, labelClassName, config, labelKey]);\n\n\tif (!active || !payload?.length) {\n\t\treturn null;\n\t}\n\n\tconst nestLabel = payload.length === 1 && indicator !== 'dot';\n\n\treturn (\n\t\t<div\n\t\t\tclassName={cn(\n\t\t\t\t'border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t>\n\t\t\t{!nestLabel ? tooltipLabel : null}\n\t\t\t<div className=\"grid gap-1.5\">\n\t\t\t\t{payload.map((item, index) => {\n\t\t\t\t\tconst key = `${nameKey || item.name || item.dataKey || 'value'}`;\n\t\t\t\t\tconst itemConfig = getPayloadConfigFromPayload(config, item, key);\n\t\t\t\t\tconst indicatorColor = color || item.payload.fill || item.color;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tkey={item.dataKey}\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t'[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5',\n\t\t\t\t\t\t\t\tindicator === 'dot' && 'items-center',\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{formatter && item?.value !== undefined && item.name ? (\n\t\t\t\t\t\t\t\tformatter(item.value, item.name, item, index, item.payload)\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{itemConfig?.icon ? (\n\t\t\t\t\t\t\t\t\t\t<itemConfig.icon />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t!hideIndicator && (\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={cn('shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t'h-2.5 w-2.5': indicator === 'dot',\n\t\t\t\t\t\t\t\t\t\t\t\t\t'w-1': indicator === 'line',\n\t\t\t\t\t\t\t\t\t\t\t\t\t'w-0 border-[1.5px] border-dashed bg-transparent': indicator === 'dashed',\n\t\t\t\t\t\t\t\t\t\t\t\t\t'my-0.5': nestLabel && indicator === 'dashed',\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'--color-bg': indicatorColor,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'--color-border': indicatorColor,\n\t\t\t\t\t\t\t\t\t\t\t\t\t} as React.CSSProperties\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={cn('flex flex-1 justify-between leading-none', nestLabel ? 'items-end' : 'items-center')}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div className=\"grid gap-1.5\">\n\t\t\t\t\t\t\t\t\t\t\t{nestLabel ? tooltipLabel : null}\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">{itemConfig?.label || item.name}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{item.value && (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-foreground font-mono font-medium tabular-nums\">\n\t\t\t\t\t\t\t\t\t\t\t\t{item.value.toLocaleString()}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nconst ChartLegend = RechartsPrimitive.Legend;\n\nfunction ChartLegendContent({\n\tclassName,\n\thideIcon = false,\n\tpayload,\n\tverticalAlign = 'bottom',\n\tnameKey,\n}: React.ComponentProps<'div'> &\n\tPick<RechartsPrimitive.LegendProps, 'payload' | 'verticalAlign'> & {\n\t\thideIcon?: boolean;\n\t\tnameKey?: string;\n\t}) {\n\tconst { config } = useChart();\n\n\tif (!payload?.length) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div className={cn('flex items-center justify-center gap-4', verticalAlign === 'top' ? 'pb-3' : 'pt-3', className)}>\n\t\t\t{payload.map((item) => {\n\t\t\t\tconst key = `${nameKey || item.dataKey || 'value'}`;\n\t\t\t\tconst itemConfig = getPayloadConfigFromPayload(config, item, key);\n\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={item.value}\n\t\t\t\t\t\tclassName={cn('[&>svg]:text-muted-foreground flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3')}\n\t\t\t\t\t>\n\t\t\t\t\t\t{itemConfig?.icon && !hideIcon ? (\n\t\t\t\t\t\t\t<itemConfig.icon />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"h-2 w-2 shrink-0 rounded-[2px]\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackgroundColor: item.color,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{itemConfig?.label}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n}\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(config: ChartConfig, payload: unknown, key: string) {\n\tif (typeof payload !== 'object' || payload === null) {\n\t\treturn undefined;\n\t}\n\n\tconst payloadPayload =\n\t\t'payload' in payload && typeof payload.payload === 'object' && payload.payload !== null\n\t\t\t? payload.payload\n\t\t\t: undefined;\n\n\tlet configLabelKey: string = key;\n\n\tif (key in payload && typeof payload[key as keyof typeof payload] === 'string') {\n\t\tconfigLabelKey = payload[key as keyof typeof payload] as string;\n\t} else if (\n\t\tpayloadPayload &&\n\t\tkey in payloadPayload &&\n\t\ttypeof payloadPayload[key as keyof typeof payloadPayload] === 'string'\n\t) {\n\t\tconfigLabelKey = payloadPayload[key as keyof typeof payloadPayload] as string;\n\t}\n\n\treturn configLabelKey in config ? config[configLabelKey] : config[key as keyof typeof config];\n}\n\nexport { ChartContainer, ChartTooltip, ChartTooltipContent, ChartLegend, ChartLegendContent, ChartStyle };\n"],"names":["THEMES","ChartContext","React","useChart","context","ChartContainer","id","className","children","config","props","uniqueId","chartId","cn","ChartStyle","RechartsPrimitive","colorConfig","theme","prefix","key","itemConfig","color","ChartTooltip","ChartTooltipContent","active","payload","indicator","hideLabel","hideIndicator","label","labelFormatter","labelClassName","formatter","nameKey","labelKey","tooltipLabel","item","getPayloadConfigFromPayload","value","nestLabel","index","indicatorColor","ChartLegend","ChartLegendContent","hideIcon","verticalAlign","payloadPayload","configLabelKey"],"mappings":"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"}