"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("react/jsx-runtime"),o=require("react"),x=require("./index.cjs13.js"),a=require("@tanstack/react-table"),s=require("./index.cjs46.js"),W=require("./index.cjs63.js"),G=require("./index.cjs97.js"),P=require("./index.cjs70.js"),_=require("./index.cjs42.js"),A=require("./index.cjs62.js");function O({columns:d,data:f,searchableColumns:c,searchPlaceholder:y,onSearch:j,loading:g,renderFilters:C,disableExtra:m,initialSearch:N,initialPageSize:b}){const[p,R]=o.useState([]),[M,v]=o.useState([]),[T,k]=o.useState({}),[h,q]=o.useState(N??""),I=(e,l,i)=>c?.length===0?String(e.getValue(l)).toLowerCase().includes(i.toLowerCase()):c?.some(r=>{const u=e.getValue(r);return String(u).toLowerCase().includes(i.toLowerCase())}),V=e=>{const l=e.getValue(),i=a.flexRender(e.column.columnDef.cell,e.getContext());return l&&h&&(!c?.length||c?.includes(e.column.id))&&typeof e.column.columnDef.cell=="function"?G.highlightTextInElement(e?.column?.columnDef?.cell(e.getContext()),h,l):i},w=o.useMemo(()=>g?Array(10).fill({}):f,[g,f]),D=o.useMemo(()=>g?d.map(e=>({...e,cell:()=>t.jsx(_.Skeleton,{className:"h-6 w-50 rounded-sm"})})):d,[g,d]),n=a.useReactTable({data:w,columns:D,getCoreRowModel:a.getCoreRowModel(),getPaginationRowModel:a.getPaginationRowModel(),getFilteredRowModel:a.getFilteredRowModel(),getSortedRowModel:a.getSortedRowModel(),onColumnFiltersChange:v,onSortingChange:R,onColumnVisibilityChange:k,autoResetPageIndex:!1,...c?{globalFilterFn:I}:{},state:{sorting:p,columnFilters:M,columnVisibility:T,globalFilter:h}}),S=p.length>0?p[0].id:null;o.useEffect(()=>{m&&n.setPageSize(f.length)},[m]),o.useEffect(()=>{b&&n.setPageSize(b)},[b]);const F=o.useMemo(()=>Math.min(1e3,Math.max(40,Math.floor(w.length*.0725))),[w.length]),H=n.getPageCount(),z=n.getState().pagination.pageIndex+1,B=Array.from({length:H},(e,l)=>l+1).map(e=>({label:`Page ${String(e)}`,value:e})),L=e=>{n.setPageIndex(Number(e)-1)};return t.jsxs("div",{className:"w-[100%] mx-auto",children:[m?null:t.jsxs("div",{className:"flex items-end justify-between py-4",children:[t.jsx(W.DebouncedInput,{debounce:F,label:"",placeholder:y??"Start typing to search",value:h??"",onChange:e=>{q(e),j&&j(e)},className:"max-w-sm"}),C&&C(n)]}),t.jsx("div",{className:"rounded-md border",children:t.jsxs(s.Table,{className:"table-fixed",children:[t.jsx(s.TableHeader,{children:n.getHeaderGroups().map(e=>t.jsx(s.TableRow,{className:"py-6",children:e.headers.map(l=>{const i=l.column.id===S,r=l.column.getSize(),u=l.column.columnDef?.width||r;return t.jsx(s.TableHead,{className:P.cn("transition-colors py-1",i&&"bg-gray-100 dark:bg-gray-700"),style:{width:u},children:t.jsx("div",{className:"line-clamp-2 break-all leading-snug",children:l.isPlaceholder?null:a.flexRender(l.column.columnDef.header,l.getContext())})},l.id)})},e.id))}),t.jsx(s.TableBody,{children:n.getRowModel().rows?.length?n.getRowModel().rows.map(e=>t.jsx(s.TableRow,{className:"py-6","data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(l=>{const i=l.column.id===S,r=l.column.getSize(),u=l.column.columnDef?.width||r;return t.jsx(s.TableCell,{style:{width:u},className:P.cn("transition-colors py-6 text-ellipsis",i&&"bg-gray-100 dark:bg-gray-700"),children:t.jsx("div",{className:"line-clamp-3 break-words leading-snug",children:V(l)})},l.id)})},e.id)):t.jsx(s.TableRow,{children:t.jsx(s.TableCell,{colSpan:d.length,className:"h-48 text-center",children:"No entries"})})})]})}),m?null:t.jsxs("div",{className:"flex items-center justify-end space-x-2 py-6",children:[t.jsxs("div",{className:"text-muted-foreground flex-1 text-sm",children:["Showing ",n.getRowModel().rows.length," of ",n.getPrePaginationRowModel().rows.length," entries"]}),t.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",n.getState().pagination.pageIndex+1," of ",n.getPageCount()||1]}),t.jsx(x.Button,{variant:"outline",size:"sm",onClick:()=>n.firstPage(),disabled:!n.getCanPreviousPage(),children:"<<"}),t.jsx(x.Button,{variant:"outline",size:"sm",onClick:()=>n.previousPage(),disabled:!n.getCanPreviousPage(),children:"Previous"}),t.jsx(x.Button,{variant:"outline",size:"sm",onClick:()=>n.nextPage(),disabled:!n.getCanNextPage(),children:"Next"}),t.jsx(x.Button,{variant:"outline",size:"sm",onClick:()=>n.lastPage(),disabled:!n.getCanNextPage(),children:">>"}),t.jsx(A.default,{value:String(z)||void 0,placeholder:"Go to page",options:B,onValueChange:L})]})]})}exports.default=O;
