"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("react/jsx-runtime"),s=require("react"),x=require("./index.cjs13.js"),r=require("@tanstack/react-table"),i=require("./index.cjs46.js"),O=require("./index.cjs63.js"),_=require("./index.cjs97.js"),M=require("./index.cjs70.js"),A=require("./index.cjs42.js"),$=require("./index.cjs62.js");function J({columns:g,data:p,searchableColumns:d,searchPlaceholder:k,onSearch:R,loading:u,renderFilters:P,disableExtra:m,initialSearch:S,initialPageSize:b}){const[C,v]=s.useState([]),[T,D]=s.useState([]),[I,V]=s.useState({}),[h,q]=s.useState(S??""),w=s.useRef(null);s.useEffect(()=>{S&&w.current&&w.current.focus()},[]);const F=(e,l,a)=>d?.length===0?String(e.getValue(l)).toLowerCase().includes(a.toLowerCase()):d?.some(o=>{const c=e.getValue(o);return String(c).toLowerCase().includes(a.toLowerCase())}),H=e=>{const l=e.getValue(),a=r.flexRender(e.column.columnDef.cell,e.getContext());return l&&h&&(!d?.length||d?.includes(e.column.id))&&typeof e.column.columnDef.cell=="function"?_.highlightTextInElement(e?.column?.columnDef?.cell(e.getContext()),h,l):a},j=s.useMemo(()=>u?Array(10).fill({}):p,[u,p]),z=s.useMemo(()=>u?g.map(e=>({...e,cell:()=>t.jsx(A.Skeleton,{className:"h-6 w-50 rounded-sm"})})):g,[u,g]),n=r.useReactTable({data:j,columns:z,getCoreRowModel:r.getCoreRowModel(),getPaginationRowModel:r.getPaginationRowModel(),getFilteredRowModel:r.getFilteredRowModel(),getSortedRowModel:r.getSortedRowModel(),onColumnFiltersChange:D,onSortingChange:v,onColumnVisibilityChange:V,autoResetPageIndex:!1,...d?{globalFilterFn:F}:{},state:{sorting:C,columnFilters:T,columnVisibility:I,globalFilter:h}}),y=C.length>0?C[0].id:null;s.useEffect(()=>{m&&n.setPageSize(p.length)},[m]),s.useEffect(()=>{b&&n.setPageSize(b)},[b]);const B=s.useMemo(()=>Math.min(1e3,Math.max(40,Math.floor(j.length*.0725))),[j.length]),L=n.getPageCount(),W=n.getState().pagination.pageIndex+1,E=Array.from({length:L||1},(e,l)=>l+1).map(e=>({label:`Page ${String(e)}`,value:e})),G=e=>{n.setPageIndex(Number(e)-1)};return t.jsxs("div",{className:"w-[100%] mx-auto",children:[m?null:t.jsxs("div",{className:"flex items-end justify-between py-4",children:[t.jsx(O.DebouncedInput,{ref:w,debounce:B,label:"",placeholder:k??"Start typing to search",value:h??"",onChange:e=>{R&&R(e),!u&&q(e)},className:"max-w-sm"}),P&&P(n)]}),t.jsx("div",{className:"rounded-md border",children:t.jsxs(i.Table,{className:"table-fixed",children:[t.jsx(i.TableHeader,{children:n.getHeaderGroups().map(e=>t.jsx(i.TableRow,{className:"py-6",children:e.headers.map(l=>{const a=l.column.id===y,o=l.column.getSize(),c=l.column.columnDef?.width||o;return t.jsx(i.TableHead,{className:M.cn("transition-colors py-1",a&&"bg-gray-100 dark:bg-gray-700"),style:{width:c},children:t.jsx("div",{className:"line-clamp-2 break-all leading-snug",children:l.isPlaceholder?null:r.flexRender(l.column.columnDef.header,l.getContext())})},l.id)})},e.id))}),t.jsx(i.TableBody,{children:n.getRowModel().rows?.length?n.getRowModel().rows.map(e=>{const l=e.getVisibleCells().find(o=>typeof o.column.columnDef.onRowClick=="function"),a=o=>{if(!l)return;const c=l.column.columnDef,f=o.target;f.closest('[data-slot="table-cell"]')?.firstElementChild?.contains(f)||c.onRowClick?.(e)};return t.jsx(i.TableRow,{onClick:a,className:"py-6","data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(o=>{const c=o.column.id===y,f=o.column.getSize(),N=o.column.columnDef?.width||f;return t.jsx(i.TableCell,{style:{width:N},className:M.cn("transition-colors py-6 text-ellipsis",c&&"bg-gray-100 dark:bg-gray-700"),children:t.jsx("div",{className:"line-clamp-3 break-words leading-snug",children:H(o)})},o.id)})},e.id)}):t.jsx(i.TableRow,{children:t.jsx(i.TableCell,{colSpan:g.length,className:"h-48 text-center",children:"No entries"})})})]})}),m?null:t.jsxs("div",{className:"flex items-center justify-end space-x-2 py-6",children:[t.jsxs("div",{className:"text-muted-foreground flex-1 text-sm",children:["Showing ",n.getRowModel().rows.length," of ",n.getPrePaginationRowModel().rows.length," entries"]}),t.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",n.getState().pagination.pageIndex+1," of ",n.getPageCount()||1]}),t.jsx(x.Button,{variant:"outline",size:"sm",onClick:()=>n.firstPage(),disabled:!n.getCanPreviousPage(),children:"<<"}),t.jsx(x.Button,{variant:"outline",size:"sm",onClick:()=>n.previousPage(),disabled:!n.getCanPreviousPage(),children:"Previous"}),t.jsx(x.Button,{variant:"outline",size:"sm",onClick:()=>n.nextPage(),disabled:!n.getCanNextPage(),children:"Next"}),t.jsx(x.Button,{variant:"outline",size:"sm",onClick:()=>n.lastPage(),disabled:!n.getCanNextPage(),children:">>"}),t.jsx($.default,{value:String(W)||void 0,placeholder:"Go to page",options:E,onValueChange:G,disabled:u})]})]})}exports.default=J;
