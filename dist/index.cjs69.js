"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("react/jsx-runtime"),s=require("react"),R=require("./index.cjs13.js"),a=require("@tanstack/react-table"),o=require("./index.cjs46.js"),H=require("./index.cjs63.js"),L=require("./index.cjs97.js"),S=require("./index.cjs70.js"),W=require("./index.cjs42.js");function z({columns:u,data:x,searchableColumns:c,searchPlaceholder:C,onSearch:j,loading:g,renderFilters:p,disableExtra:m,initialSearch:M,initialPageSize:f}){const[w,N]=s.useState([]),[P,T]=s.useState([]),[v,q]=s.useState({}),[h,D]=s.useState(M??""),F=(e,n,i)=>c?.length===0?String(e.getValue(n)).toLowerCase().includes(i.toLowerCase()):c?.some(r=>{const d=e.getValue(r);return String(d).toLowerCase().includes(i.toLowerCase())}),I=e=>{const n=e.getValue(),i=a.flexRender(e.column.columnDef.cell,e.getContext());return n&&h&&(!c?.length||c?.includes(e.column.id))&&typeof e.column.columnDef.cell=="function"?L.highlightTextInElement(e?.column?.columnDef?.cell(e.getContext()),h,n):i},b=s.useMemo(()=>g?Array(10).fill({}):x,[g,x]),V=s.useMemo(()=>g?u.map(e=>({...e,cell:()=>t.jsx(W.Skeleton,{className:"h-6 w-50 rounded-sm"})})):u,[g,u]),l=a.useReactTable({data:b,columns:V,getCoreRowModel:a.getCoreRowModel(),getPaginationRowModel:a.getPaginationRowModel(),getFilteredRowModel:a.getFilteredRowModel(),getSortedRowModel:a.getSortedRowModel(),onColumnFiltersChange:T,onSortingChange:N,onColumnVisibilityChange:q,autoResetPageIndex:!1,...c?{globalFilterFn:F}:{},state:{sorting:w,columnFilters:P,columnVisibility:v,globalFilter:h}}),y=w.length>0?w[0].id:null;s.useEffect(()=>{m&&l.setPageSize(x.length)},[m]),s.useEffect(()=>{f&&l.setPageSize(f)},[f]);const k=s.useMemo(()=>Math.min(1e3,Math.max(40,Math.floor(b.length*.0725))),[b.length]);return t.jsxs("div",{className:"w-[100%] mx-auto",children:[m?null:t.jsxs("div",{className:"flex items-end justify-between py-4",children:[t.jsx(H.DebouncedInput,{debounce:k,label:"",placeholder:C??"Start typing to search",value:h??"",onChange:e=>{D(e),j&&j(e)},className:"max-w-sm"}),p&&p(l)]}),t.jsx("div",{className:"rounded-md border",children:t.jsxs(o.Table,{className:"table-fixed",children:[t.jsx(o.TableHeader,{children:l.getHeaderGroups().map(e=>t.jsx(o.TableRow,{className:"py-6",children:e.headers.map(n=>{const i=n.column.id===y,r=n.column.getSize(),d=n.column.columnDef?.width||r;return t.jsx(o.TableHead,{className:S.cn("transition-colors py-1",i&&"bg-gray-100 dark:bg-gray-700"),style:{width:d},children:t.jsx("div",{className:"line-clamp-2 break-all leading-snug",children:n.isPlaceholder?null:a.flexRender(n.column.columnDef.header,n.getContext())})},n.id)})},e.id))}),t.jsx(o.TableBody,{children:l.getRowModel().rows?.length?l.getRowModel().rows.map(e=>t.jsx(o.TableRow,{className:"py-6","data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(n=>{const i=n.column.id===y,r=n.column.getSize(),d=n.column.columnDef?.width||r;return t.jsx(o.TableCell,{style:{width:d},className:S.cn("transition-colors py-6 text-ellipsis",i&&"bg-gray-100 dark:bg-gray-700"),children:t.jsx("div",{className:"line-clamp-3 break-words leading-snug",children:I(n)})},n.id)})},e.id)):t.jsx(o.TableRow,{children:t.jsx(o.TableCell,{colSpan:u.length,className:"h-48 text-center",children:"No entries"})})})]})}),m?null:t.jsxs("div",{className:"flex items-center justify-end space-x-2 py-6",children:[t.jsxs("div",{className:"text-muted-foreground flex-1 text-sm",children:["Showing ",l.getRowModel().rows.length," of ",l.getPrePaginationRowModel().rows.length," entries"]}),t.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",l.getState().pagination.pageIndex+1," of ",l.getPageCount()||1]}),t.jsx(R.Button,{variant:"outline",size:"sm",onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),children:"Previous"}),t.jsx(R.Button,{variant:"outline",size:"sm",onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),children:"Next"})]})]})}exports.default=z;
