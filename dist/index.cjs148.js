"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const W=require("./index.cjs156.js"),$=require("./index.cjs155.js"),g=require("./index.cjs203.js"),R=require("./index.cjs169.js"),k=require("react"),B=require("./index.cjs149.js"),j=require("./index.cjs150.js"),T=require("./index.cjs214.js");function V(t){const f=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const n in t)if(n!=="default"){const u=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(f,n,u.get?u:{enumerable:!0,get:()=>t[n]})}}return f.default=t,Object.freeze(f)}const e=V(k);function I(t,f){var n=t.children,u=t.disabled,o=e.useRef(null),m=e.useRef(null),d=e.useContext(B.CollectionContext),p=typeof n=="function",a=p?n(o):n,l=e.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),b=!p&&e.isValidElement(a)&&R.supportRef(a),D=b?R.getNodeRef(a):null,N=R.useComposeRef(D,o),O=function(){var i;return g.default(o.current)||(o.current&&$.default(o.current)==="object"?g.default((i=o.current)===null||i===void 0?void 0:i.nativeElement):null)||g.default(m.current)};e.useImperativeHandle(f,function(){return O()});var C=e.useRef(t);C.current=t;var _=e.useCallback(function(r){var i=C.current,q=i.onResize,P=i.data,w=r.getBoundingClientRect(),v=w.width,h=w.height,c=r.offsetWidth,s=r.offsetHeight,E=Math.floor(v),H=Math.floor(h);if(l.current.width!==E||l.current.height!==H||l.current.offsetWidth!==c||l.current.offsetHeight!==s){var M={width:E,height:H,offsetWidth:c,offsetHeight:s};l.current=M;var x=c===Math.round(v)?v:c,z=s===Math.round(h)?h:s,S=W.default(W.default({},M),{},{offsetWidth:x,offsetHeight:z});d?.(S,r,P),q&&Promise.resolve().then(function(){q(S,r)})}},[]);return e.useEffect(function(){var r=O();return r&&!u&&j.observe(r,_),function(){return j.unobserve(r,_)}},[o.current,u]),e.createElement(T.default,{ref:m},b?e.cloneElement(a,{ref:N}):a)}var y=e.forwardRef(I);process.env.NODE_ENV!=="production"&&(y.displayName="SingleObserver");exports.default=y;
