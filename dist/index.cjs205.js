"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const Te=require("./index.cjs156.js"),i=require("./index.cjs202.js"),d=require("./index.cjs171.js"),Ae=require("./index.cjs172.js");require("./index.cjs173.js");const F=require("./index.cjs174.js");require("./index.cjs169.js");require("./index.cjs96.js");const ve=require("./index.cjs254.js"),c=require("react"),e=require("./index.cjs207.js"),Pe=require("./index.cjs255.js"),pe=require("./index.cjs256.js"),m=require("./index.cjs206.js");function Re(E){const u=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(E){for(const s in E)if(s!=="default"){const t=Object.getOwnPropertyDescriptor(E,s);Object.defineProperty(u,s,t.get?t:{enumerable:!0,get:()=>E[s]})}}return u.default=E,Object.freeze(u)}const G=Re(c);function me(E,u,s,t){var M=t.motionEnter,_=M===void 0?!0:M,D=t.motionAppear,N=D===void 0?!0:D,I=t.motionLeave,T=I===void 0?!0:I,C=t.motionDeadline,J=t.motionLeaveImmediately,K=t.onAppearPrepare,W=t.onEnterPrepare,X=t.onLeavePrepare,Y=t.onAppearStart,Z=t.onEnterStart,ee=t.onLeaveStart,te=t.onAppearActive,ne=t.onEnterActive,re=t.onLeaveActive,U=t.onAppearEnd,L=t.onEnterEnd,y=t.onLeaveEnd,g=t.onVisibleChanged,ue=F.default(),b=d.default(ue,2),S=b[0],ae=b[1],oe=ve.default(e.STATUS_NONE),h=d.default(oe,2),j=h[0],A=h[1],ie=F.default(null),Q=d.default(ie,2),Ee=Q[0],k=Q[1],a=j(),v=c.useRef(!1),q=c.useRef(null);function P(){return s()}var w=c.useRef(!1);function x(){A(e.STATUS_NONE),k(null,!0)}var H=Ae.default(function(r){var n=j();if(n!==e.STATUS_NONE){var o=P();if(!(r&&!r.deadline&&r.target!==o)){var p=w.current,R;n===e.STATUS_APPEAR&&p?R=U?.(o,r):n===e.STATUS_ENTER&&p?R=L?.(o,r):n===e.STATUS_LEAVE&&p&&(R=y?.(o,r)),p&&R!==!1&&x()}}}),Se=Pe.default(H),ce=d.default(Se,1),le=ce[0],z=function(n){switch(n){case e.STATUS_APPEAR:return i.default(i.default(i.default({},e.STEP_PREPARE,K),e.STEP_START,Y),e.STEP_ACTIVE,te);case e.STATUS_ENTER:return i.default(i.default(i.default({},e.STEP_PREPARE,W),e.STEP_START,Z),e.STEP_ACTIVE,ne);case e.STATUS_LEAVE:return i.default(i.default(i.default({},e.STEP_PREPARE,X),e.STEP_START,ee),e.STEP_ACTIVE,re);default:return{}}},f=G.useMemo(function(){return z(a)},[a]),se=m.default(a,!E,function(r){if(r===e.STEP_PREPARE){var n=f[e.STEP_PREPARE];return n?n(P()):m.SkipStep}if(l in f){var o;k(((o=f[l])===null||o===void 0?void 0:o.call(f,P(),null))||null)}return l===e.STEP_ACTIVE&&a!==e.STATUS_NONE&&(le(P()),C>0&&(clearTimeout(q.current),q.current=setTimeout(function(){H({deadline:!0})},C))),l===e.STEP_PREPARED&&x(),m.DoStep}),$=d.default(se,2),fe=$[0],l=$[1],de=m.isActive(l);w.current=de;var B=c.useRef(null);pe.default(function(){if(!(v.current&&B.current===u)){ae(u);var r=v.current;v.current=!0;var n;!r&&u&&N&&(n=e.STATUS_APPEAR),r&&u&&_&&(n=e.STATUS_ENTER),(r&&!u&&T||!r&&J&&!u&&T)&&(n=e.STATUS_LEAVE);var o=z(n);n&&(E||o[e.STEP_PREPARE])?(A(n),fe()):A(e.STATUS_NONE),B.current=u}},[u]),c.useEffect(function(){(a===e.STATUS_APPEAR&&!N||a===e.STATUS_ENTER&&!_||a===e.STATUS_LEAVE&&!T)&&A(e.STATUS_NONE)},[N,_,T]),c.useEffect(function(){return function(){v.current=!1,clearTimeout(q.current)}},[]);var O=G.useRef(!1);c.useEffect(function(){S&&(O.current=!0),S!==void 0&&a===e.STATUS_NONE&&((O.current||S)&&g?.(S),O.current=!0)},[S,a]);var V=Ee;return f[e.STEP_PREPARE]&&l===e.STEP_START&&(V=Te.default({transition:"none"},V)),[a,l,V,S??u]}exports.default=me;
