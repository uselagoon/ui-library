"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const x=require("./index.cjs270.js"),y=require("./index.cjs96.js"),p=require("react"),M=require("./index.cjs279.js");function _(n){const u=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const e in n)if(e!=="default"){const t=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(u,e,t.get?t:{enumerable:!0,get:()=>n[e]})}}return u.default=n,Object.freeze(u)}const a=_(p);function W(n,u,e,t,m,l,b,O){var L=a.useRef(n);L.current=n;var v=a.useRef(!1);a.useEffect(function(){if(u&&t&&(!m||l)){var P=function(){v.current=!1},r=function(f){var o;L.current&&!b(((o=f.composedPath)===null||o===void 0||(o=o.call(f))===null||o===void 0?void 0:o[0])||f.target)&&!v.current&&O(!1)},i=M.getWin(t);i.addEventListener("pointerdown",P,!0),i.addEventListener("mousedown",r,!0),i.addEventListener("contextmenu",r,!0);var c=x.getShadowRoot(e);if(c&&(c.addEventListener("mousedown",r,!0),c.addEventListener("contextmenu",r,!0)),process.env.NODE_ENV!=="production"){var s,d,D=e==null||(s=e.getRootNode)===null||s===void 0?void 0:s.call(e),q=(d=t.getRootNode)===null||d===void 0?void 0:d.call(t);y.warning(D===q,"trigger element and popup element should in same shadow root.")}return function(){i.removeEventListener("pointerdown",P,!0),i.removeEventListener("mousedown",r,!0),i.removeEventListener("contextmenu",r,!0),c&&(c.removeEventListener("mousedown",r,!0),c.removeEventListener("contextmenu",r,!0))}}},[u,e,t,m,l]);function j(){v.current=!0}return j}exports.default=W;
