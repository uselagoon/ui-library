"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("react/jsx-runtime"),A=require("react"),s=require("./index.cjs41.js"),D=require("./index.cjs94.js"),B=require("./index.cjs95.js"),y=require("./index.cjs10.js"),W=require("@radix-ui/react-avatar"),H=require("./index.cjs96.js"),X=require("./index.cjs5.js"),N=require("./index.cjs19.js"),M=require("lucide-react"),z=require("./index.cjs13.js"),J=require("./index.cjs70.js"),O=(u,h,l)=>h.children?.length?e.jsx("ul",{className:"ml-4 mt-2 space-y-1",children:h.children.map(a=>e.jsxs(s.SidebarMenuItem,{children:[e.jsx(s.SidebarMenuButton,{asChild:!0,isActive:l.has(a.url),children:e.jsx(u,{href:a.url,className:`${a.icon?"":"ml-4"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[a.icon&&e.jsx(a.icon,{}),e.jsx("span",{children:a.title})]})})}),O(u,a,l)]},a.title))}):null;function K({userInfo:u,appInfo:h,currentPath:l,sidenavItems:a,signOutFn:P,...U}){const m=X.useLinkComponent(),{name:_,image:k,email:x}=u,$=!!k,f=_?.split(" ")??[],j=f[0]??void 0,p=f.length>1?f.slice(1).join(" "):" ",v=!!(j&&p),q=v?B.genAvatarBackground(j.charAt(0),p.charAt(0)):B.genAvatarBackground(x.charAt(0),x.charAt(1)),F=v?j.charAt(0).toUpperCase()+p.charAt(0).toUpperCase():x.charAt(0).toUpperCase(),L=$?e.jsxs(y.Avatar,{children:[e.jsx(y.AvatarImage,{src:k,alt:"user_avatar"}),e.jsx(W.AvatarFallback,{children:"Avatar"})]}):e.jsx(H.default,{bgColor:q.bgColor,textColor:q.textColor,children:F}),T=v?e.jsx("span",{className:"user-name",children:`${j} ${p}`}):e.jsx("span",{className:"user-name",children:x}),b=A.useMemo(()=>{const i=new Set,r=(t,c=!1)=>{const o=Array.isArray(t.children)&&t.children.length>0,C=l===t.url;let d=!1;o&&(d=t.children.some(w=>{const R=w.url===t.url;return r(w,R)}));let n=C||d;return!c&&o&&l.startsWith(t.url+"/")&&(n=!0),n&&i.add(t.url),C||d};return a.forEach(t=>{t.sectionItems.forEach(c=>r(c))}),i},[a,l]),{state:E}=s.useSidebar(),[g,S]=A.useState(!1),G={...h,signOutFn:P,isCollapsed:E==="collapsed"};return e.jsxs(e.Fragment,{children:[!g&&e.jsx("div",{className:"lg:hidden fixed top-2 left-4 z-40",children:e.jsx(z.Button,{variant:"ghost",size:"icon",onClick:()=>S(!0),"aria-label":"Open sidebar",children:e.jsx(M.Menu,{className:"h-5 w-5"})})}),e.jsxs(s.Sidebar,{variant:"sidebar",collapsible:"none",...U,className:J.cn("fixed lg:static top-0 left-0 z-40 h-full lg:h-[unset] bg-background transition-transform duration-300","w-[min(20vw,100%)] min-w-[290px] overflow-hidden pr-4 lg:pr-0","lg:translate-x-0",g?"translate-x-0":"-translate-x-full"),children:[g&&e.jsx("div",{className:"lg:hidden absolute top-4 right-0",children:e.jsx(z.Button,{variant:"ghost",size:"icon",onClick:()=>S(!1),"aria-label":"Close sidebar",children:e.jsx(M.X,{className:"h-5 w-5"})})}),e.jsx(s.SidebarHeader,{children:e.jsx(s.SidebarMenu,{children:e.jsx(s.SidebarMenuItem,{children:e.jsx(D.default,{...G})})})}),e.jsx(s.SidebarContent,{children:a.map(i=>e.jsxs(s.SidebarGroup,{children:[e.jsx(s.SidebarGroupLabel,{children:i.section}),e.jsx(s.SidebarGroupContent,{className:"list-none",children:i.sectionItems.map(r=>{const t=r.target==="blank",c=r?.onClick,o=Array.from(b).some(n=>n.startsWith(r.url)),d=["Projects","Organizations"].includes(r.title);return e.jsx(A.Fragment,{children:e.jsxs(N.Collapsible,{open:o,children:[e.jsx(s.SidebarMenuItem,{children:e.jsx(N.CollapsibleTrigger,{asChild:!0,children:e.jsx(s.SidebarMenuButton,{asChild:!0,isActive:b.has(r.url),children:e.jsxs(m,{"data-cy":`nav-${r.url.slice(1)}`,onClick:async()=>{c&&await c()},href:r.url,target:t?"_blank":"_self",className:"flex w-full gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[r.icon&&e.jsx(r.icon,{}),e.jsx("span",{children:r.title})]}),d?e.jsx(M.ChevronUp,{className:`ml-auto h-4 w-4 transition-transform ${o?"rotate-180":"rotate-90"}`}):null]})})})}),e.jsx(N.CollapsibleContent,{children:e.jsx(s.SidebarMenuSub,{children:r.children?.map(n=>e.jsxs(s.SidebarMenuItem,{children:[e.jsx(s.SidebarMenuButton,{asChild:!0,isActive:b.has(n.url),children:e.jsx(m,{href:n.url,className:"mt-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[n.icon&&e.jsx(n.icon,{}),e.jsx("span",{children:n.title})]})})}),O(m,n,b)]},n.title))})})]})},r.title)})})]},i.section))}),e.jsx(s.SidebarFooter,{children:e.jsx(s.SidebarMenu,{children:e.jsx(s.SidebarMenuItem,{children:e.jsxs(s.SidebarMenuButton,{size:"lg",children:[L,e.jsx("div",{className:"grid flex-1 text-left text-sm leading-tight",children:e.jsx("span",{className:"truncate font-light",children:T})})]})})})})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-30 lg:hidden",onClick:()=>S(!1)})]})}exports.default=K;
