"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const l=require("react/jsx-runtime"),S=require("./ChangeLogItem.cjs.js"),A=require("../Checkbox/Checkbox.cjs.js"),r=require("react");function C({changeLogItems:i=[]}){const[n,c]=r.useState(i),[a,o]=r.useState(new Set(["All"])),[d,f]=r.useState(10),u=r.useRef(null);if(!n||n.length===0)return l.jsx("div",{children:"No activity to display."});const m=r.useMemo(()=>{const e=new Set(["All"]);return i?.forEach(s=>{s.tags?.forEach(t=>{e.add(t)})}),Array.from(e)},[i]);r.useEffect(()=>{const e=new IntersectionObserver(s=>{s[0].isIntersecting&&f(t=>t+10)},{threshold:1});return u.current&&e.observe(u.current),()=>e.disconnect()},[n]),r.useEffect(()=>{f(10)},[a]);const h=()=>m.map(e=>l.jsx(A.default,{id:e,label:e,className:"my-2",checked:a.has(e),onCheckedChange:s=>v(e,s)},e)),v=(e,s)=>{const t=new Set(a);if(e==="All"){s&&(o(new Set(["All"])),c(i));return}if(t.delete("All"),s?t.add(e):t.delete(e),t.size===0){o(new Set(["All"])),c(i);return}o(t);const x=i?.filter(j=>j.tags?.some(w=>t.has(w)));c(x)},b=n.slice(0,d);return l.jsxs("div",{className:"flex gap-8 justify-between",children:[l.jsxs("div",{className:"flex-1",children:[b.map(e=>l.jsx(S.default,{...e},e.id)),d<n.length&&l.jsx("div",{ref:u,className:"h-4 w-full"})]}),l.jsxs("aside",{className:"min-w-[300px]","aria-label":"Activity filters",children:[l.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Filter"}),h()]})]})}exports.default=C;
