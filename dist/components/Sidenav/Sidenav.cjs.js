"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("react/jsx-runtime"),N=require("react"),a=require("../ui/sidebar.cjs.js"),F=require("./SidenavFooterMenu.cjs.js"),y=require("../../_util/helpers.cjs.js"),B=require("../ui/avatar.cjs.js"),R=require("@radix-ui/react-avatar"),U=require("../AvatarBubble/AvatarBubble.cjs.js"),z=require("../../providers/NextLinkProvider.cjs.js"),m=require("../ui/collapsible.cjs.js"),k=require("lucide-react"),_=require("../ui/button.cjs.js"),E=require("../../lib/utils.cjs.js"),P=require("./useActivePaths.cjs.js"),D=require("./SidenavLogo.cjs.js"),X=require("../AnnouncementCard/AnnouncementCard.cjs.js"),A=({item:s,activePaths:l,currentPath:t})=>{const i=z.useLinkComponent(),p=s.children&&s.children.length>0,o=t===s.url,c=l.has(s.url)||l.has(`${s.url}:parent`),[f,h]=N.useState(c);N.useEffect(()=>{h(c)},[c]);const d=s.target==="blank",r=s.onClick;return p?s.collapsible!==!1?e.jsx(m.Collapsible,{open:f,onOpenChange:h,className:"group/collapsible",children:e.jsxs(a.SidebarMenuItem,{children:[e.jsx(a.SidebarMenuButton,{asChild:!0,isActive:o,tooltip:s.title,children:e.jsxs(i,{href:s.url,"data-cy":`nav-${s.url.slice(1)}`,onClick:async n=>{r&&await r()},target:d?"_blank":"_self",className:"flex w-full items-center gap-2",children:[s.icon&&e.jsx(s.icon,{className:"!size-6"}),e.jsx("span",{children:s.title})]})}),e.jsx(m.CollapsibleTrigger,{asChild:!0,children:e.jsxs(a.SidebarMenuAction,{className:"data-[state=open]:rotate-90 transition-transform duration-200",children:[e.jsx(k.ChevronRight,{}),e.jsx("span",{className:"sr-only",children:"Toggle"})]})}),e.jsx(m.CollapsibleContent,{children:e.jsx(a.SidebarMenuSub,{children:s.children.map(n=>e.jsx(A,{item:n,activePaths:l,currentPath:t},n.title))})})]})}):e.jsxs(a.SidebarMenuItem,{children:[e.jsx(a.SidebarMenuButton,{asChild:!0,isActive:o,tooltip:s.title,children:e.jsxs(i,{href:s.url,"data-cy":`nav-${s.url.slice(1)}`,onClick:async()=>{r&&await r()},target:d?"_blank":"_self",className:"flex w-full items-center gap-2",children:[s.icon&&e.jsx(s.icon,{className:"!size-6"}),e.jsx("span",{children:s.title})]})}),e.jsx(a.SidebarMenuSub,{children:s.children.map(n=>e.jsx(A,{item:n,activePaths:l,currentPath:t},n.title))})]}):e.jsx(a.SidebarMenuItem,{children:e.jsx(a.SidebarMenuButton,{asChild:!0,isActive:o,tooltip:s.title,children:e.jsxs(i,{href:s.url,"data-cy":`nav-${s.url.slice(1)}`,onClick:async()=>{r&&await r()},target:d?"_blank":"_self",children:[s.icon&&e.jsx(s.icon,{className:"!size-6"}),e.jsx("span",{children:s.title})]})})})};function H({userInfo:s,appInfo:l,currentPath:t,sidenavItems:i,signOutFn:p,documentationUrl:o,cardProps:c,footerItems:f,disableAccountLink:h,disableChangeFeedLink:d,...r}){z.useLinkComponent();const{name:q,image:n,email:u}=s,O=!!n,g=q?.split(" ")??[],x=g[0]??void 0,b=g.length>1?g.slice(1).join(" "):" ",v=!!(x&&b),M=v?y.genAvatarBackground(x.charAt(0),b.charAt(0)):y.genAvatarBackground(u.charAt(0),u.charAt(1)),I=v?x.charAt(0).toUpperCase()+b.charAt(0).toUpperCase():u.charAt(0).toUpperCase(),L=O?e.jsxs(B.Avatar,{children:[e.jsx(B.AvatarImage,{src:n,alt:"user_avatar"}),e.jsx(R.AvatarFallback,{children:"Avatar"})]}):e.jsx(U.default,{bgColor:M.bgColor,textColor:M.textColor,children:I}),$=v?e.jsx("span",{className:"user-name",children:`${x} ${b}`}):e.jsx("span",{className:"user-name",children:u}),G=P.default(i,t),[j,C]=N.useState(!1),T={...l,signOutFn:p,avatar:L,userDisplayName:$,email:u,footerItems:f||[],documentationUrl:o,disableAccountLink:h,disableChangeFeedLink:d};return e.jsxs(e.Fragment,{children:[!j&&e.jsx("div",{className:"lg:hidden fixed top-2 left-4 z-40",children:e.jsx(_.Button,{variant:"ghost",size:"icon",onClick:()=>C(!0),"aria-label":"Open sidebar",children:e.jsx(k.Menu,{className:"h-5 w-5"})})}),e.jsxs(a.Sidebar,{variant:"sidebar",collapsible:"none",...r,className:E.cn("fixed top-0 left-0 z-40 h-screen bg-background transition-transform duration-300","min-w-[290px] overflow-hidden","flex flex-col",j?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[j&&e.jsx("div",{className:"lg:hidden absolute top-4 right-0",children:e.jsx(_.Button,{variant:"ghost",size:"icon",onClick:()=>C(!1),"aria-label":"Close sidebar",children:e.jsx(k.X,{className:"h-5 w-5"})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(D.default,{})}),e.jsx(a.SidebarContent,{className:"flex-1 overflow-y-auto min-h-0",children:i.map(S=>e.jsxs(a.SidebarGroup,{children:[e.jsx(a.SidebarGroupLabel,{children:S.section}),e.jsx(a.SidebarGroupContent,{className:"list-none",children:S.sectionItems.map(w=>e.jsx(A,{item:w,activePaths:G,currentPath:t},w.title))})]},S.section))}),e.jsxs(a.SidebarFooter,{className:"flex-shrink-0",children:[e.jsx(a.SidebarGroup,{children:e.jsx(a.SidebarGroupContent,{children:e.jsx(X.default,{...c||{}})})}),e.jsx(a.SidebarMenu,{children:e.jsx(a.SidebarMenuItem,{children:e.jsx(F.default,{...T})})})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-30 lg:hidden",onClick:()=>C(!1)})]})}exports.default=H;
