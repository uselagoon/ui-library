"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("react/jsx-runtime"),M=require("react"),r=require("../ui/sidebar.cjs.js"),W=require("./SidenavFooterMenu.cjs.js"),w=require("../../_util/helpers.cjs.js"),B=require("../ui/avatar.cjs.js"),X=require("@radix-ui/react-avatar"),H=require("../AvatarBubble/AvatarBubble.cjs.js"),J=require("../../providers/NextLinkProvider.cjs.js"),v=require("../ui/collapsible.cjs.js"),g=require("lucide-react"),$=require("../ui/button.cjs.js"),K=require("../../lib/utils.cjs.js"),Q=require("./useActivePaths.cjs.js"),V=require("./SidenavLogo.cjs.js"),Y=require("../AnnouncementCard/AnnouncementCard.cjs.js"),Z=require("../AnnouncementCarousel/AnnouncementCarousel.cjs.js"),y=(o,c,t)=>c.children?.length?e.jsx("ul",{className:"ml-4 mt-2 space-y-1",children:c.children.map(s=>{const h=s.children&&s.children.length>0?t.has(s.url)||t.has(`${s.url}:parent`):t.has(s.url);return e.jsxs(r.SidebarMenuItem,{children:[e.jsx(r.SidebarMenuButton,{asChild:!0,isActive:h,children:e.jsx(o,{href:s.url,className:`${s.icon?"":"ml-4"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.icon&&e.jsx(s.icon,{}),e.jsx("span",{children:s.title})]})})}),y(o,s,t)]},s.title)})}):null;function I({userInfo:o,appInfo:c,currentPath:t,sidenavItems:s,signOutFn:C,documentationUrl:h,cardProps:z,carouselProps:S,disableAccountLink:O,disableChangeFeedLink:F,...G}){const j=J.useLinkComponent(),{name:L,image:N,email:i}=o,P=!!N,p=L?.split(" ")??[],u=p[0]??void 0,d=p.length>1?p.slice(1).join(" "):" ",b=!!(u&&d),A=b?w.genAvatarBackground(u.charAt(0),d.charAt(0)):w.genAvatarBackground(i.charAt(0),i.charAt(1)),U=b?u.charAt(0).toUpperCase()+d.charAt(0).toUpperCase():i.charAt(0).toUpperCase(),_=P?e.jsxs(B.Avatar,{children:[e.jsx(B.AvatarImage,{src:N,alt:"user_avatar"}),e.jsx(X.AvatarFallback,{children:"Avatar"})]}):e.jsx(H.default,{bgColor:A.bgColor,textColor:A.textColor,children:U}),T=b?e.jsx("span",{className:"user-name",children:`${u} ${d}`}):e.jsx("span",{className:"user-name",children:i}),l=Q.default(s,t),[x,m]=M.useState(!1),R={...c,signOutFn:C,avatar:_,userDisplayName:T,email:i,documentationUrl:h,disableAccountLink:O,disableChangeFeedLink:F};return e.jsxs(e.Fragment,{children:[!x&&e.jsx("div",{className:"lg:hidden fixed top-2 left-4 z-40",children:e.jsx($.Button,{variant:"ghost",size:"icon",onClick:()=>m(!0),"aria-label":"Open sidebar",children:e.jsx(g.Menu,{className:"h-5 w-5"})})}),e.jsxs(r.Sidebar,{variant:"sidebar",collapsible:"none",...G,className:K.cn("fixed top-0 left-0 z-40 h-screen bg-background transition-transform duration-300","min-w-[290px] overflow-hidden","flex flex-col",x?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[x&&e.jsx("div",{className:"lg:hidden absolute top-4 right-0",children:e.jsx($.Button,{variant:"ghost",size:"icon",onClick:()=>m(!1),"aria-label":"Close sidebar",children:e.jsx(g.X,{className:"h-5 w-5"})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(V.default,{})}),e.jsx(r.SidebarContent,{className:"flex-1 overflow-y-auto min-h-0",children:s.map(f=>e.jsxs(r.SidebarGroup,{children:[e.jsx(r.SidebarGroupLabel,{children:f.section}),e.jsx(r.SidebarGroupContent,{className:"list-none",children:f.sectionItems.map(a=>{const D=a.target==="blank",q=a?.onClick,k=Array.from(l).some(n=>n.startsWith(a.url)),E=["Projects","Organizations"].includes(a.title);return e.jsx(M.Fragment,{children:e.jsxs(v.Collapsible,{open:k,children:[e.jsx(r.SidebarMenuItem,{children:e.jsx(v.CollapsibleTrigger,{asChild:!0,children:e.jsx(r.SidebarMenuButton,{asChild:!0,isActive:l.has(a.url)||l.has(`${a.url}:parent`),children:e.jsxs(j,{"data-cy":`nav-${a.url.slice(1)}`,onClick:async()=>{q&&await q()},href:a.url,target:D?"_blank":"_self",className:"flex w-full gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[a.icon&&e.jsx(a.icon,{}),e.jsx("span",{children:a.title})]}),E?e.jsx(g.ChevronUp,{className:`ml-auto h-4 w-4 transition-transform ${k?"rotate-180":"rotate-90"}`}):null]})})})}),e.jsx(v.CollapsibleContent,{children:e.jsx(r.SidebarMenuSub,{children:a.children?.map(n=>e.jsxs(r.SidebarMenuItem,{children:[e.jsx(r.SidebarMenuButton,{asChild:!0,isActive:l.has(n.url)||l.has(`${n.url}:parent`),children:e.jsx(j,{href:n.url,className:"mt-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[n.icon&&e.jsx(n.icon,{}),e.jsx("span",{children:n.title})]})})}),y(j,n,l)]},n.title))})})]})},a.title)})})]},f.section))}),e.jsxs(r.SidebarFooter,{className:"flex-shrink-0",children:[e.jsx(r.SidebarGroup,{children:e.jsx(r.SidebarGroupContent,{children:S?e.jsx(Z.default,{...S}):e.jsx(Y.default,{...z||{}})})}),e.jsx(r.SidebarMenu,{children:e.jsx(r.SidebarMenuItem,{children:e.jsx(W.default,{...R})})})]})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-30 lg:hidden",onClick:()=>m(!1)})]})}exports.default=I;
