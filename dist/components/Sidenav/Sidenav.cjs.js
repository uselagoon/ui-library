"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("react/jsx-runtime"),N=require("react"),a=require("../ui/sidebar.cjs.js"),$=require("./SidenavFooterMenu.cjs.js"),w=require("../../_util/helpers.cjs.js"),y=require("../ui/avatar.cjs.js"),G=require("@radix-ui/react-avatar"),T=require("../AvatarBubble/AvatarBubble.cjs.js"),U=require("../../providers/NextLinkProvider.cjs.js"),m=require("../ui/collapsible.cjs.js"),k=require("lucide-react"),B=require("../ui/button.cjs.js"),F=require("../../lib/utils.cjs.js"),R=require("./useActivePaths.cjs.js"),E=require("./SidenavLogo.cjs.js"),P=require("../AnnouncementCard/AnnouncementCard.cjs.js"),A=({item:s,activePaths:l,currentPath:t})=>{const i=U.useLinkComponent(),p=s.children&&s.children.length>0,u=t===s.url,o=l.has(s.url)||l.has(`${s.url}:parent`),[f,h]=N.useState(o);N.useEffect(()=>{h(o)},[o]);const d=s.target==="blank",n=s.onClick;return p?s.collapsible!==!1?e.jsx(m.Collapsible,{open:f,onOpenChange:h,className:"group/collapsible",children:e.jsxs(a.SidebarMenuItem,{children:[e.jsx(a.SidebarMenuButton,{asChild:!0,isActive:u,tooltip:s.title,children:e.jsxs(i,{href:s.url,"data-cy":`nav-${s.url.slice(1)}`,onClick:async r=>{n&&await n()},target:d?"_blank":"_self",className:"flex w-full items-center gap-2",children:[s.icon&&e.jsx(s.icon,{className:"!size-6"}),e.jsx("span",{children:s.title})]})}),e.jsx(m.CollapsibleTrigger,{asChild:!0,children:e.jsxs(a.SidebarMenuAction,{className:"data-[state=open]:rotate-90 transition-transform duration-200",children:[e.jsx(k.ChevronRight,{}),e.jsx("span",{className:"sr-only",children:"Toggle"})]})}),e.jsx(m.CollapsibleContent,{children:e.jsx(a.SidebarMenuSub,{children:s.children.map(r=>e.jsx(A,{item:r,activePaths:l,currentPath:t},r.title))})})]})}):e.jsxs(a.SidebarMenuItem,{children:[e.jsx(a.SidebarMenuButton,{asChild:!0,isActive:u,tooltip:s.title,children:e.jsxs(i,{href:s.url,"data-cy":`nav-${s.url.slice(1)}`,onClick:async()=>{n&&await n()},target:d?"_blank":"_self",className:"flex w-full items-center gap-2",children:[s.icon&&e.jsx(s.icon,{className:"!size-6"}),e.jsx("span",{children:s.title})]})}),e.jsx(a.SidebarMenuSub,{children:s.children.map(r=>e.jsx(A,{item:r,activePaths:l,currentPath:t},r.title))})]}):e.jsx(a.SidebarMenuItem,{children:e.jsx(a.SidebarMenuButton,{asChild:!0,isActive:u,tooltip:s.title,children:e.jsxs(i,{href:s.url,"data-cy":`nav-${s.url.slice(1)}`,onClick:async()=>{n&&await n()},target:d?"_blank":"_self",children:[s.icon&&e.jsx(s.icon,{className:"!size-6"}),e.jsx("span",{children:s.title})]})})})};function D({userInfo:s,appInfo:l,currentPath:t,sidenavItems:i,signOutFn:p,documentationUrl:u,cardProps:o,footerItems:f,...h}){const{name:d,image:n,email:c}=s,r=!!n,g=d?.split(" ")??[],x=g[0]??void 0,b=g.length>1?g.slice(1).join(" "):" ",v=!!(x&&b),q=v?w.genAvatarBackground(x.charAt(0),b.charAt(0)):w.genAvatarBackground(c.charAt(0),c.charAt(1)),_=v?x.charAt(0).toUpperCase()+b.charAt(0).toUpperCase():c.charAt(0).toUpperCase(),z=r?e.jsxs(y.Avatar,{children:[e.jsx(y.AvatarImage,{src:n,alt:"user_avatar"}),e.jsx(G.AvatarFallback,{children:"Avatar"})]}):e.jsx(T.default,{bgColor:q.bgColor,textColor:q.textColor,children:_}),O=v?e.jsx("span",{className:"user-name",children:`${x} ${b}`}):e.jsx("span",{className:"user-name",children:c}),I=R.default(i,t),[j,C]=N.useState(!1),L={...l,signOutFn:p,avatar:z,userDisplayName:O,email:c,footerItems:f||[]};return e.jsxs(e.Fragment,{children:[!j&&e.jsx("div",{className:"lg:hidden fixed top-2 left-4 z-40",children:e.jsx(B.Button,{variant:"ghost",size:"icon",onClick:()=>C(!0),"aria-label":"Open sidebar",children:e.jsx(k.Menu,{className:"h-5 w-5"})})}),e.jsxs(a.Sidebar,{variant:"sidebar",collapsible:"none",...h,className:F.cn("fixed top-0 left-0 z-40 h-screen bg-background transition-transform duration-300","min-w-[290px] overflow-hidden","flex flex-col",j?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[j&&e.jsx("div",{className:"lg:hidden absolute top-4 right-0",children:e.jsx(B.Button,{variant:"ghost",size:"icon",onClick:()=>C(!1),"aria-label":"Close sidebar",children:e.jsx(k.X,{className:"h-5 w-5"})})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(E.default,{})}),e.jsx(a.SidebarContent,{className:"flex-1 overflow-y-auto min-h-0",children:i.map(S=>e.jsxs(a.SidebarGroup,{children:[e.jsx(a.SidebarGroupLabel,{children:S.section}),e.jsx(a.SidebarGroupContent,{className:"list-none",children:S.sectionItems.map(M=>e.jsx(A,{item:M,activePaths:I,currentPath:t},M.title))})]},S.section))}),e.jsxs(a.SidebarFooter,{className:"flex-shrink-0",children:[e.jsx(a.SidebarGroup,{children:e.jsx(a.SidebarGroupContent,{children:e.jsx(P.default,{...o||{}})})}),e.jsx(a.SidebarMenu,{children:e.jsx(a.SidebarMenuItem,{children:e.jsx($.default,{...L})})})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-30 lg:hidden",onClick:()=>C(!1)})]})}exports.default=D;
