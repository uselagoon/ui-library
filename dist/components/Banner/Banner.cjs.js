"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("react/jsx-runtime"),o=require("react"),g=require("../../_util/pluginBridge.cjs.js"),l=require("../ui/collapsible.cjs.js"),f=require("../ui/button.cjs.js"),c=require("lucide-react"),b=require("./BannerCard.cjs.js");function j(){const[i,u]=o.useState(null);if(o.useEffect(()=>{const t=a=>{a&&u(a)};return g.default.subscribe("maintenance:update",t)},[]),!i)return null;const m=i.Maintenances??[],n=i.Incidents??[],s=m.filter(t=>{if(t.status!=="scheduled")return!0;const r=new Date(t.scheduled_for).getTime(),a=new Date(t.scheduled_until).getTime(),d=Date.now(),h=60*60*1e3;return r-d<h&&a>d}).sort((t,r)=>new Date(t.scheduled_for).getTime()-new Date(r.scheduled_for).getTime());if(s.length===0&&n.length===0)return null;const x=[...n.map(t=>({...t,type:"Incident"})),...s.map(t=>({...t,type:"Maintenance"}))];return e.jsxs(l.Collapsible,{className:"w-full max-w-xl mx-auto border-x border-b rounded-lg bg-[var(--background)]",children:[e.jsx("div",{className:"pt-1.5 pb-2 px-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center bg-[var(--badge-warning-bg)]/25",children:e.jsx(c.Info,{className:"w-5 h-5 text-[var(--badge-warning-bg)]"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium",children:"Active Service Disruptions"}),e.jsxs(l.CollapsibleTrigger,{className:"flex items-end gap-2",children:[e.jsxs("p",{className:"text-sm text-[var(--muted-foreground)] mt-0.5",children:[n.length+s.length," active issue",n.length+s.length!==1?"s":""]}),e.jsx(c.ChevronDown,{className:"w-5 h-5 text-[var(--muted-foreground)] hover:text-[var(--foreground)]"})]})]})]}),e.jsx("div",{className:"justify-items-start",children:e.jsx(f.Button,{className:"text-xs size-6",variant:"outline",onClick:()=>u(null),children:e.jsx(c.X,{className:"w-4 h-4"})})})]})}),e.jsx(l.CollapsibleContent,{className:"mt-2",children:x.map(t=>e.jsx(b.default,{bannerItem:t},t.id))})]})}exports.default=j;
