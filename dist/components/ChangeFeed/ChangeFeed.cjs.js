"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const t=require("react/jsx-runtime"),p=require("./ChangeFeedItem.cjs.js"),N=require("../Checkbox/Checkbox.cjs.js"),l=require("react");function S({changeFeedItems:n=[]}){const[i,c]=l.useState(n),[a,o]=l.useState(new Set(["All"])),[u,f]=l.useState(10),d=l.useRef(null);if(!i||i.length===0)return t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"border rounded-lg p-8 max-w-md text-center",children:[t.jsx("p",{className:"text-lg font-medium mb-2",children:"No activity to display"}),t.jsx("p",{className:"text-sm",children:"Check back later for updates and new features."})]})});const m=l.useMemo(()=>{const e=new Set(["All"]);return n?.forEach(r=>{r.tags?.forEach(s=>{e.add(s)})}),Array.from(e)},[n]);l.useEffect(()=>{const e=new IntersectionObserver(r=>{r[0].isIntersecting&&f(s=>s+10)},{threshold:1});return d.current&&e.observe(d.current),()=>e.disconnect()},[i]),l.useEffect(()=>{f(10)},[a]);const x=()=>m.map(e=>t.jsx(N.default,{id:e,label:e,className:"my-2",checked:a.has(e),onCheckedChange:r=>h(e,r)},e)),h=(e,r)=>{const s=new Set(a);if(e==="All"){r&&(o(new Set(["All"])),c(n));return}if(s.delete("All"),r?s.add(e):s.delete(e),s.size===0){o(new Set(["All"])),c(n);return}o(s);const v=n?.filter(j=>j.tags?.some(w=>s.has(w)));c(v)},b=i.slice(0,u);return t.jsxs("div",{className:"flex gap-8 justify-between",children:[t.jsxs("div",{className:"flex-1",children:[b.map(e=>t.jsx(p.default,{...e},e.id)),u<i.length&&t.jsx("div",{ref:d,className:"h-4 w-full"})]}),t.jsxs("aside",{className:"min-w-[300px]","aria-label":"Activity filters",children:[t.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Filter"}),x()]})]})}exports.default=S;
